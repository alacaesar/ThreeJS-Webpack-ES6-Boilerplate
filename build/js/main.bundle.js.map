{"version":3,"sources":["webpack://threejs-es6-webpack-boilerplate/./src/js/data/config.js","webpack://threejs-es6-webpack-boilerplate/./src/js/utils/detector.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/vars.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/renderer.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/camera.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/light.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/controls.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/events.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/fx.js","webpack://threejs-es6-webpack-boilerplate/./src/js/utils/bufferGeometryUtils.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/elements/globe.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/elements/earth.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/elements/stars.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/material.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/elements/rectLight.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/elements/platform.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/overlay.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/timeline.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/main.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/helpers/FilmGrainShader.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/helpers/LensDistortionShader.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app.js","webpack://threejs-es6-webpack-boilerplate/./src/js/utils/orbitControls.js"],"names":["isDev","isShowingStats","isLoaded","isTweening","isRotating","isMouseMoving","isMouseOver","maxAnisotropy","dpr","easing","TWEEN","duration","model","selected","initialTypes","type","models","path","scale","texture","imageFiles","name","image","mesh","enableHelper","wireframe","translucent","material","color","emissive","colors","current","r","g","b","day","night","globe","fog","near","fog2","camera","fov","far","aspect","posX","posY","posZ","platformCamera","globeCamera","controls","autoRotate","autoRotateSpeed","rotateSpeed","zoomSpeed","minDistance","maxDistance","minPolarAngle","Math","PI","maxPolarAngle","minAzimuthAngle","Infinity","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","target","x","y","z","ambientLight","enabled","directionalLight","intensity","shadow","helperEnabled","bias","mapWidth","mapHeight","top","right","bottom","left","pointLight","distance","hemiLight","groundColor","canvas","window","CanvasRenderingContext2D","webgl","document","createElement","WebGLRenderingContext","getContext","e","workers","Worker","fileapi","File","FileReader","FileList","Blob","getWebGLErrorMessage","element","id","style","fontFamily","fontSize","fontWeight","textAlign","background","padding","width","margin","this","innerHTML","join","addGetWebGLMessage","parameters","parent","undefined","body","appendChild","isPaused","isPauseLoopFunctions","isMouseActive","isCutActive","platformIsInitialized","isGlobeActive","globeRadius","loopFunctions","mouseCoords","localPlanes","windowSize","height","currentMilestone","textures","milestones","coords","lat","lng","city","year","title","description","sound","time","Renderer","scene","container","threeRenderer","THREE","powerPreference","antialias","outputEncoding","setClearColor","setPixelRatio","devicePixelRatio","localClippingEnabled","domElement","shadowMap","Config","capabilities","getMaxAnisotropy","updateSize","addEventListener","vars","offsetWidth","offsetHeight","setSize","clear","clearDepth","render","Camera","renderer","threeCamera","position","set","updateProjectionMatrix","Light","init","visible","castShadow","mapSize","directionalLightHelper","lightName","add","Controls","orbitControls","OrbitControls","threeControls","audio","equilizer","statueInside","readTimer","dots","bip","ambient","promise","musicBtn","j","audioPaused","pointer","mouseXY","selectedID","Events","main","then","_","pause","error","classList","contains","play","onMouseMoveHandler","querySelector","btns","querySelectorAll","i","length","btn","buttonClickSwitcher","buttonHoverHandler","forEach","setAttribute","onAudioClick","onMouseDownHandler","clientX","clientY","handleIntersects","setFromCamera","intersects","intersectObjects","object","remove","markerClickHandler","_this","c","getAttribute","backClickHandler","nextClickHandler","startClickHandler","introStartClickHandler","musicClickHandler","readMoreClickHandler","closeAboutClickHandler","anime","targets","constant","complete","config","volume","setTimeout","DIRECTION","milestone","Number","isInteger","random","focused","coeff","update","count","words","tickTime","setInterval","cssText","clearInterval","n","parseInt","gotoMilestone","handleTransition","hasWebGL","gl","convertFlatCoordsToSphereCoords","globeWidth","globeHeight","latitude","longitude","radius","cos","sin","isPointInsideCircle","centerX","centerY","pX","pY","removeFromLoop","fx","splice","isMobile","a","check","navigator","userAgent","vendor","opera","innerWidth","test","substr","BufferGeometryUtils","computeTangents","geometry","index","attributes","normal","uv","indices","array","positions","normals","uvs","nVertices","tangent","BufferAttribute","Float32Array","tangents","tan1","tan2","Vector3","vA","vB","vC","uvA","Vector2","uvB","uvC","sdir","tdir","groups","start","il","group","jl","handleTriangle","w","t","tmp","tmp2","n2","handleVertex","console","fromArray","sub","isFinite","copy","multiplyScalar","addScaledVector","v","dot","normalize","crossVectors","mergeBufferGeometries","geometries","useGroups","isIndexed","attributesUsed","Set","Object","keys","morphAttributesUsed","morphAttributes","morphTargetsRelative","mergedGeometry","BufferGeometry","offset","attributesCount","has","push","size","userData","mergedUserData","addGroup","indexOffset","mergedIndex","getX","setIndex","mergedAttribute","mergeBufferAttributes","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","TypedArray","itemSize","normalized","arrayLength","attribute","isInterleavedBufferAttribute","constructor","interleaveAttributes","stride","l","interleavedBuffer","InterleavedBuffer","res","getters","setters","iba","InterleavedBufferAttribute","k","estimateBytesUsed","mem","attr","BYTES_PER_ELEMENT","getIndex","mergeVertices","tolerance","max","EPSILON","hashToIndex","vertexCount","nextIndex","attributeNames","attrArrays","morphAttrsArrays","newIndices","morphAttr","Array","fill","map","decimalShift","log10","shiftMultiplier","pow","hash","newarray","newMorphArrays","getterFunc","m","ml","result","clone","oldAttribute","buffer","oldMorphAttribute","morphAttribute","toTrianglesDrawMode","drawMode","TrianglesDrawMode","warn","TriangleFanDrawMode","TriangleStripDrawMode","numberOfTriangles","newGeometry","clearGroups","blob","ring","ring2","ring3","localPlane","clouds","earthBall","matrix","markers","simplex","SimplexNoise","flies","Globe","blobGeometry","blobMaterial","emissiveIntensity","transparent","opacity","depthTest","depthWrite","flatShading","roughness","metalness","reflectivity","side","rotation","pointGeometry","pointGeometry2","pointMaterial","clippingPlanes","clipShadows","data","point","makeTranslation","applyMatrix4","globeShape","addMarker","children","_m","uniforms","value","obj","marker","grassMaterial","color1","color2","needsUpdate","vertexShader","fragmentShader","cylinderGeom","latRad","lonRad","sphere","light","light1","light2","light3","light4","basePositionAttribute","positionAttribute","vertex","vertexIndex","fromBufferAttribute","ratio","noise3D","setXYZ","computeBoundingSphere","Earth","mapTexture","load","rotate","elevMap","waterMap","cloudsTexture","bumpMap","bumpScale","specularMap","specular","animateEarth","stars","Stars","star","Material","basic","standard","wire","RectLight","lightBox","rectLight","rectLightMesh","rectLightMeshBack","rectBox","platformConfig","lightConfig","mixer","variants","platform","h","s","modelHolderObject","Platform","lights","floor","landGeometry","landMaterial","land","addGrass","addFireflies","addModel","removeModel","GLTFLoader","setPath","gltf","traverse","o","isMesh","animations","clip","clipAction","animateModel","animateFlies","delta","saplingGeometry","row","noise2D","grass","segment","alpha","place","events","curtain","Overlay","getElementById","initText","initGlobe","ID","textWrappers","text","textContent","split","replaceAll","replace","arr","ul","li","an","milestoneClickHandler","inside","texts","svg","stones","stoneAnimArray","loop","translateY","delay","el","h2","bubble","innerText","_h","getBoundingClientRect","div","callback","section","animate","about","ps","scaleY","sections","composer","composer2","renderPass","renderPass2","distortPass","grainPass","fxaaPass","Timeline","overlay","preloader","fixSections","intro","earth","animateGlobe","startGlobe","animateCurtain","scrollTo","Promise","resolve","reject","loader","url","loaded","total","filename","addEarth","includes","FilmGrainShader","tDiffuse","noiseOffset","LensDistortionShader","defines","BAND_MODE","CHROMA_SAMPLES","baseIor","bandOffset","jitterIntensity","jitterOffset","params","enableNoise","noiseSpeed","noiseIntensity","enableDistortion","samples","exposure","bloomStrength","bloomThreshold","bloomRadius","activeScene","scenes","composers","Main","clock","startColor","scene2","RenderPass","ShaderPass","FXAAShader","EffectComposer","innerHeight","addPass","timeline","wrapDuration","K","lookAt","dispose","getDelta","Date","now","vec","requestAnimationFrame","bind","Detector","module","exports","MOUSE","OrbitConstraint","minZoom","maxZoom","theta","phi","quat","quatInverse","lastPosition","lastQuaternion","scope","EPS","phiDelta","thetaDelta","panOffset","zoomChanged","getPolarAngle","getAzimuthalAngle","rotateLeft","angle","rotateUp","panLeft","te","elements","panUp","pan","deltaX","deltaY","screenWidth","screenHeight","PerspectiveCamera","targetDistance","tan","OrthographicCamera","dollyIn","dollyScale","zoom","min","dollyOut","Quaternion","setFromUnitVectors","up","inverse","applyQuaternion","atan2","sqrt","distanceToSquared","quaternion","constraint","defineProperty","get","center","enableRotate","enablePan","keyPanSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","ZOOM","MIDDLE","PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","STATE","state","target0","position0","zoom0","changeEvent","startEvent","endEvent","clientWidth","clientHeight","getZoomScale","onMouseDown","event","preventDefault","button","onMouseMove","onMouseUp","dispatchEvent","subVectors","removeEventListener","onMouseWheel","stopPropagation","wheelDelta","detail","onKeyDown","keyCode","touchstart","touches","pageX","pageY","dx","dy","touchmove","touchend","contextmenu","reset","prototype","create","EventDispatcher","defineProperties","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor"],"mappings":"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","file":"main.bundle.js","sourcesContent":["import TWEEN from '@tweenjs/tween.js';\n\n// This object contains the state of the app\nexport default {\n  isDev: false,\n  isShowingStats: false,\n  isLoaded: false,\n  isTweening: false,\n  isRotating: false,\n  isMouseMoving: false,\n  isMouseOver: false,\n  maxAnisotropy: 1,\n  dpr: 1,\n  easing: TWEEN.Easing.Quadratic.InOut,\n  duration: 500,\n  model: {\n    selected: 0,\n    initialTypes: ['gltf', 'box', 'object'],\n    type: 'gltf'\n  },\n  models: [\n    {\n      path: './assets/models/BoxAnimated.gltf',\n      scale: 20,\n      type: 'gltf'\n    },\n    {\n      path: './assets/models/duck.gltf',\n      scale: 20,\n      type: 'box'\n    },\n    {\n      path: './assets/models/Teapot.json',\n      scale: 20,\n      type: 'object'\n    }\n  ],\n  texture: {\n    path: './assets/textures/',\n    imageFiles: [\n      { name: 'UV', image: 'UV_Grid_Sm.jpg' }\n    ]\n  },\n  mesh: {\n    enableHelper: false,\n    wireframe: false,\n    translucent: false,\n    material: {\n      color: 0xffffff,\n      emissive: 0xffffff\n    }\n  },\n  colors:{\n    current: {r:79, g:161, b:216},\n    day: {r:79, g:161, b:216},\n    night: {r:21, g:17, b:31},\n    globe: {r:0, g:61, b:178}\n  },\n  fog: {\n    color: 0x003DB2,\n    near: 0.002\n  },\n  fog2: {\n    color: 0x002B7E,\n    near: 0.004\n  },\n  camera: {\n    fov: 45,\n    near: 1,\n    far: 3000,\n    aspect: 1,\n    posX: 0,\n    posY: 0,\n    posZ: 270\n  },\n  platformCamera:{\n    posX: 0,\n    posY: 0,\n    posZ: 60\n  },\n  globeCamera:{\n    posX: 0,\n    posY: 0,\n    posZ: 340\n  },\n  controls: {\n    autoRotate: false,\n    autoRotateSpeed: -0.5,\n    rotateSpeed: 0.5,\n    zoomSpeed: 0.8,\n    minDistance: 160,\n    maxDistance: 540,\n    minPolarAngle: Math.PI / 5,\n    maxPolarAngle: Math.PI / 2,\n    minAzimuthAngle: -Infinity,\n    maxAzimuthAngle: Infinity,\n    enableDamping: true,\n    dampingFactor: 0.5,\n    enableZoom: true,\n    target: {\n      x: 0,\n      y: 0,\n      z: 0\n    }\n  },\n  ambientLight: {\n    enabled: true,\n    color: 0x333333\n  },\n  directionalLight: {\n    enabled: true,\n    color: 0xf0f0f0,\n    intensity: 0.2,\n    x: -75,\n    y: 180,\n    z: 150\n  },\n  shadow: {\n    enabled: true,\n    helperEnabled: false,\n    bias: 0,\n    mapWidth: 2048,\n    mapHeight: 2048,\n    near: 250,\n    far: 400,\n    top: 100,\n    right: 100,\n    bottom: -100,\n    left: -100\n  },\n  pointLight: {\n    enabled: true,\n    color: 0xffffff,\n    intensity: 0.34,\n    distance: 115,\n    x: 0,\n    y: 0,\n    z: 0\n  },\n  hemiLight: {\n    enabled: true,\n    color: 0xc8c8c8,\n    groundColor: 0xffffff,\n    intensity: 0.55,\n    x: 0,\n    y: 0,\n    z: 0\n  }\n};\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nexport default {\n  canvas: !!window.CanvasRenderingContext2D,\n  webgl: (function() {\n    try {\n      var canvas = document.createElement('canvas');\n\n      return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch(e) {\n      return false;\n    }\n  })(),\n\n  workers: !!window.Worker,\n  fileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n  getWebGLErrorMessage: function() {\n    var element = document.createElement('div');\n    element.id = 'webgl-error-message';\n    element.style.fontFamily = 'monospace';\n    element.style.fontSize = '13px';\n    element.style.fontWeight = 'normal';\n    element.style.textAlign = 'center';\n    element.style.background = '#fff';\n    element.style.color = '#000';\n    element.style.padding = '1.5em';\n    element.style.width = '400px';\n    element.style.margin = '5em auto 0';\n\n    if(!this.webgl) {\n      element.innerHTML = window.WebGLRenderingContext ? [\n        'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000000\">WebGL</a>.<br />',\n        'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000000\">here</a>.'\n      ].join('\\n') : [\n        'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000000\">WebGL</a>.<br/>',\n        'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000000\">here</a>.'\n      ].join('\\n');\n    }\n\n    return element;\n  },\n\n  addGetWebGLMessage: function(parameters) {\n    var parent, id, element;\n\n    parameters = parameters || {};\n\n    parent = parameters.parent !== undefined ? parameters.parent : document.body;\n    id = parameters.id !== undefined ? parameters.id : 'oldie';\n\n    element = this.getWebGLErrorMessage();\n    element.id = id;\n\n    parent.appendChild(element);\n  }\n};\n","\nvar vars = {\n  isPaused: false,\n  isPauseLoopFunctions: false,\n  isMouseActive: false,\n  isCutActive: false,\n  platformIsInitialized: false,\n  isGlobeActive: false,\n\n  globeRadius:100,\n  loopFunctions: [],\n  mouseCoords: {x:0, y:0},\n  localPlanes: [],\n\n  windowSize:{width:0, height:0},\n\n  currentMilestone: null,\n\n  // loaded textures will be stored here.\n  textures:[],\n\n  // default paths stored here\n  path:{\n    textures: '/assets/textures/',\n  },\n\n  milestones: [\n    {\n      id: 0,\n      coords:{lat:42.296928, lng:-71.291862},\n      city:'Wellesley',\n      year: '2011',\n      model: '11_The-start.glb',\n      title: 'Where it all <$began$>',\n      description: 'Founded in 2011 with a focus on mobile technology solutions, Mobiquity continuously adapted in response to client needs and evolving technology.',\n      sound: '/vo/VO_Milestone_011.mp3',\n      time:9,\n    },\n    {\n      id: 1,\n      coords:{lat:47.606209, lng:-122.332069},\n      city:'Seattle',\n      year: '2011',\n      model: '03_AWS.glb',\n      title: 'From partnership to <$events$> <$partner$>',\n      description: 'Mobiquity has worked with AWS as an APN Premier Consulting Partner since 2011 to deliver 100% cloud-based innovation to its clients, including design & dev of the AWS re:Invent app since 2016.',\n      sound: '/vo/VO_Milestone_003.mp3',\n      time:15,\n    },\n    {\n      id: 2,\n      coords:{lat:38.63028, lng:-90.20031},\n      city:'St Louis, MO',\n      year: '2012',\n      model: '01_Self-service-kiosk.glb',\n      title: 'Panera self-service kiosks',\n      description: 'Panera wanted to set the new digital standard for quick service restaurants. Mobiquity helped them create an omnichannel eCommerce platform and introduced self-service kiosks & mobile ordering.',\n      sound: '/vo/VO_Milestone_001.mp3',\n      time:11,\n    },\n    {\n      id: 3,\n      coords:{lat:23.022505, lng:72.571365},\n      city:'Ahmedabad',\n      year: '2015',\n      model: '12_Expansion-overseas.glb',\n      title: 'Going <$global$>',\n      description: 'With the acquisitions of Xaton and Morgan Clark, Mobiquity extended its operations into Europe & India.',\n      sound: '/vo/VO_Milestone_012.mp3',\n      time:6,\n    },\n    {\n      id: 4,\n      coords:{lat:50.850346, lng:4.351721},\n      city:'Amsterdam',\n      year: '2016',\n      model: '05_Cloud-based-protection.glb',\n      title: 'Cloud-based fraud <$protection$>',\n      description: 'Surepay introduced an IBAN name check to fight fraudulent payment transactions in the Netherlands with an AWS cloud-based mobile solution built using Mobiquity’s Digital Traction Model.',\n      sound: '/vo/VO_Milestone_005.mp3',\n      time:10,\n    },\n    {\n      id: 5,\n      coords:{lat:37.774929, lng:-122.419418},\n      city:'San Francisco',\n      year: '2017',\n      model: '02_World_s-first-digital-pill.glb',\n      title: 'Patient health goes <$digital$>',\n      description: 'Otsuka worked with Mobiquity to design and develop a breakthrough drug-device combination product. Its new data on drug consumption helps patients, caregivers & families stay informed.',\n      sound: '/vo/VO_Milestone_002.mp3',\n      time: 11,\n    },\n    {\n      id: 6,\n      coords:{lat:52.344718, lng:9.799318},\n      city:'Amsterdam',\n      year: '2018',\n      model: '06_Digital-Traction.glb',\n      title: 'Accelerating Innovation with <$Digtial$> <$Traction$>',\n      description: 'A large European bank establishes an innovation factory with Mobiquity, using its Digital Traction Model, that has since worked on 15+ value propositions over the course of 3 years.',\n      sound: '/vo/VO_Milestone_006.mp3',\n      time:11,\n    },\n    {\n      id: 7,\n      coords:{lat:14.604847, lng:120.77997},\n      city:'Manila',\n      year: '2018',\n      model: '08_BPI.glb',\n      title: 'A <$Better$> Digital Banking Experience',\n      description: 'BPI engaged Mobiquity to go live with an online portal and mobile banking offering. BPI Online has hit the 4 million+ mark for enrolled users, and it experienced a transaction surge of 87% in 2019.',\n      sound: '/vo/VO_Milestone_008.mp3',\n      time:14,\n    },\n    {\n      id: 8,\n      coords:{lat:35.794325, lng:-78.642417},\n      city:'North Carolina',\n      year: '2018',\n      model: '09_Alexa.glb',\n      title: '<$Talking$> Turkey in the kitchen',\n      description: 'Butterball worked with Mobiquity to design and launch a multi-modal Amazon Alexa skill that provides a voice channel for US consumers to find answers to their most common turkey topics.',\n      sound: '/vo/VO_Milestone_009.mp3',\n      time:10,\n    },\n    {\n      id: 9,\n      coords:{lat:-13.545140, lng:-58.819939},\n      city:'Latin America',\n      year: '2018',\n      model: '10_Secure-Scalalble-Payments.glb',\n      title: 'Secure, Scalable Payments Gateway',\n      description: 'To ensure scalable access to data services & micropayment processing for 30M+ users, a large LatAm telecom worked with Mobiquity to create a digital engagement platform & payment gateway.',\n      sound: '/vo/VO_Milestone_010.mp3',\n      time:11,\n    },\n    {\n      id: 10,\n      coords:{lat:26.0667001, lng:50.557701},\n      city:'Manama',\n      year: '2019',\n      model: '04_ILA.glb',\n      title: 'Launch of <$ila$> <$Bank$>',\n      description: 'Bank ABC partnered with Mobiquity from strategy & idea inception through to implementation & the launch of Ila Bank; the first digital, mobile-only bank in Bahrain.',\n      sound: '/vo/VO_Milestone_004.mp3',\n      time:10,\n    },\n    {\n      id: 11,\n      coords:{lat:19.039624, lng:72.988701},\n      city:'Mumbai',\n      year: '2019',\n      model: '13_500-employees.glb',\n      title: '500 employees',\n      description: 'Celebrations across the offices marked the significance of Mobiquity\\'s 500th employee.',\n      sound: '/vo/VO_Milestone_013.mp3',\n      time:5,\n    },\n    {\n      id: 12,\n      coords:{lat:13.08268, lng:80.270721},\n      city:'Chennai',\n      year: '2019',\n      model: '15_Hexaware.glb',\n      title: 'Hello, <$Hexaware$>',\n      description: 'In 2019, Mobiquity is acquired by Hexaware Technologies to accelerate the IT engineering services firm\\'s offering around customer experience transformation.',\n      sound: '/vo/VO_Milestone_015.mp3',\n      time:10,\n    },\n    {\n      id: 13,\n      coords:{lat:41.203323, lng:-77.194527},\n      city:'Pennsylvania',\n      year: '2020',\n      model: '07_Wawa.glb',\n      title: 'Taking convenience to the <$next$> <$level$>',\n      description: 'A customer since 2013, Wawa worked with Mobiquity to deliver improved convenience during the covid pandemic by rolling out additional mobile app features, like curbside & in-app delivery.',\n      sound: '/vo/VO_Milestone_007.mp3',\n      time:11,\n    },\n    {\n      id: 14,\n      coords:{lat:-26.204103, lng:28.047304},\n      city:'Johannesburg',\n      year: '2020',\n      model: '18_1000-employees.glb',\n      title: '1000 employees',\n      description: 'With the addition of Hexaware Interactive folks to the Mobiquity team, we cross the 1,000 people mark.',\n      sound: '/vo/VO_Milestone_018.mp3',\n      time: 6,\n    },\n    {\n      id: 15,\n      coords:{lat:49.838994, lng:8.691392},\n      city:'Amsterdam',\n      year: '2021',\n      model: '14_Mobster-Award.glb',\n      title: 'We celebrate <$Mobstars!$>',\n      description: 'From Mobstar awards to Digital First Awards, Mobiquity celebrates and thanks our colleages for their contributions to our clients and our communities.',\n      sound: '/vo/VO_Milestone_014.mp3',\n      time:8,\n    },\n    {\n      id: 16,\n      coords:{lat:-33.860097, lng:151.222226},\n      city:'Sydney',\n      year: '2021',\n      model: '16_Setting-foot-outback.glb',\n      title: 'Setting foot in the outback',\n      description: 'Mobiquity hires its first employee in Australia in 2021, marking its expanision into the region.',\n      sound: '/vo/VO_Milestone_016.mp3',\n      time:7,\n    },\n    {\n      id: 17,\n      coords:{lat:39.830555, lng:-75.111105},\n      city:'Philadelphia',\n      year: '2021',\n      model: '17_Awards.glb',\n      title: 'And the <$award$> goes to...',\n      description: 'From Top Consulting Firm to diversity inclusion awards, partner awards and analyst recognitions, the word gets out that Mobiquity is a great place to work.',\n      sound: '/vo/VO_Milestone_017.mp3',\n      time:10,\n    },\n    {\n      id: 18,\n      coords:{lat:18.232057, lng:74.017494},\n      city:'Pune',\n      year: '2021',\n      model: '19_India.glb',\n      title: 'We keep expanding in <$India$>',\n      description: 'In 2021, Mobiquity opens its third location in India and announces plans to double its footprint in the country. We now have offices in Ahmedabad, Pune and Hyderabad.',\n      sound: '/vo/VO_Milestone_019.mp3',\n      time:11,\n    },\n    {\n      id: 19,\n      //coords:{lat:40.779371, lng:-74.064078}, New york\n      //coords:{lat:-33.924870, lng:18.424055}, Cape town\n      coords:{lat:53.339561, lng:-2.958824},\n      city:'London',\n      year: '2021',\n      model: '20_Next-frontiers.glb',\n      title: 'The next <$frontier$>',\n      description: 'Mobiquity marks its 10 year anniversary with a renewed focus on digital products and sets course to help brands achieve brand gravity in the digital space.',\n      sound: '/vo/VO_Milestone_020.mp3',\n      time:10,\n    },\n  ],\n\n}\n\nexport default vars;\n","import * as THREE from 'three';\n\nimport Config from '../../data/config';\nimport vars from '../vars';\n\n// Main webGL renderer class\nexport default class Renderer {\n  constructor(scene, container) {\n    // Properties\n    this.scene = scene;\n    this.container = container;\n\n    // Create WebGL renderer and set its antialias\n    this.threeRenderer = new THREE.WebGLRenderer({powerPreference: \"high-performance\", antialias: true});\n    this.threeRenderer.outputEncoding = THREE.sRGBEncoding;\n\n    // Set clear color to fog to enable fog or to hex color for no fog\n    this.threeRenderer.setClearColor(scene.fog.color);\n    this.threeRenderer.setPixelRatio(window.devicePixelRatio); // For retina\n\n    /*\n    var globalPlane = new THREE.Plane( new THREE.Vector3( - 1, 0, 0 ), 0);\n    this.threeRenderer.clippingPlanes = [ globalPlane ];\n    */\n    this.threeRenderer.localClippingEnabled = true;\n\n    // Appends canvas\n    container.appendChild(this.threeRenderer.domElement);\n\n    // Shadow map options\n    this.threeRenderer.shadowMap.enabled = true;\n    this.threeRenderer.shadowMap.type = THREE.PCFSoftShadowMap;\n\n    // Get anisotropy for textures\n    Config.maxAnisotropy = this.threeRenderer.capabilities.getMaxAnisotropy();\n\n    // Initial size update set to canvas container\n    this.updateSize();\n\n    // Listeners\n    document.addEventListener('DOMContentLoaded', () => this.updateSize(), false);\n    window.addEventListener('resize', () => this.updateSize(), false);\n  }\n\n  updateSize() {\n    vars.windowSize = {width:this.container.offsetWidth, height:this.container.offsetHeight};\n    this.threeRenderer.setSize(this.container.offsetWidth, this.container.offsetHeight);\n  }\n\n  render(scene, camera) {\n    // Renders scene to canvas target\n    //this.threeRenderer.autoClear = true;\n    this.threeRenderer.clear();\n    this.threeRenderer.clearDepth();\n    this.threeRenderer.render(scene, camera);\n  }\n}\n","import * as THREE from 'three';\n\nimport Config from '../../data/config';\n\n// Class that creates and updates the main camera\nexport default class Camera {\n  constructor(renderer) {\n    const width = renderer.domElement.width;\n    const height = renderer.domElement.height;\n\n    // Create and position a Perspective Camera\n    this.threeCamera = new THREE.PerspectiveCamera(Config.camera.fov, width / height, Config.camera.near, Config.camera.far);\n    this.threeCamera.position.set(Config.camera.posX, Config.camera.posY, Config.camera.posZ);\n\n    // Initial sizing\n    this.updateSize(renderer);\n    \n    // Listeners\n    window.addEventListener('resize', () => this.updateSize(renderer), false);\n  }\n\n  updateSize(renderer) {\n    // Update camera aspect ratio with window aspect ratio\n    this.threeCamera.aspect = renderer.domElement.width / renderer.domElement.height;\n\n    // Always call updateProjectionMatrix on camera change\n    this.threeCamera.updateProjectionMatrix();\n  }\n}\n","import * as THREE from 'three';\n\nimport Config from '../../data/config';\n\n// Sets up and places all lights in scene\nexport default class Light {\n  constructor(scene) {\n    this.scene = scene;\n\n    this.init();\n  }\n\n  init() {\n    // Ambient\n    this.ambientLight = new THREE.AmbientLight(Config.ambientLight.color);\n    this.ambientLight.visible = Config.ambientLight.enabled;\n\n    // Point light\n    this.pointLight = new THREE.PointLight(Config.pointLight.color, Config.pointLight.intensity, Config.pointLight.distance);\n    this.pointLight.position.set(Config.pointLight.x, Config.pointLight.y, Config.pointLight.z);\n    this.pointLight.visible = Config.pointLight.enabled;\n\n    // Directional light\n    this.directionalLight = new THREE.DirectionalLight(Config.directionalLight.color, Config.directionalLight.intensity);\n    this.directionalLight.position.set(Config.directionalLight.x, Config.directionalLight.y, Config.directionalLight.z);\n    this.directionalLight.visible = Config.directionalLight.enabled;\n\n    // Shadow map\n    this.directionalLight.castShadow = Config.shadow.enabled;\n    this.directionalLight.shadow.bias = Config.shadow.bias;\n    this.directionalLight.shadow.camera.near = Config.shadow.near;\n    this.directionalLight.shadow.camera.far = Config.shadow.far;\n    this.directionalLight.shadow.camera.left = Config.shadow.left;\n    this.directionalLight.shadow.camera.right = Config.shadow.right;\n    this.directionalLight.shadow.camera.top = Config.shadow.top;\n    this.directionalLight.shadow.camera.bottom = Config.shadow.bottom;\n    this.directionalLight.shadow.mapSize.width = Config.shadow.mapWidth;\n    this.directionalLight.shadow.mapSize.height = Config.shadow.mapHeight;\n\n    // Shadow camera helper\n    if(Config.isDev) {\n      this.directionalLightHelper = new THREE.CameraHelper(this.directionalLight.shadow.camera);\n      this.directionalLightHelper.visible = Config.shadow.helperEnabled;\n    }\n    // Hemisphere light\n    this.hemiLight = new THREE.HemisphereLight(Config.hemiLight.color, Config.hemiLight.groundColor, Config.hemiLight.intensity);\n    this.hemiLight.position.set(Config.hemiLight.x, Config.hemiLight.y, Config.hemiLight.z);\n    this.hemiLight.visible = Config.hemiLight.enabled;\n  }\n\n  place(lightName) {\n    switch(lightName) {\n      case 'ambient':\n        this.scene.add(this.ambientLight);\n        break;\n\n      case 'directional':\n        this.scene.add(this.directionalLight);\n        if(Config.isDev) {\n          this.scene.add(this.directionalLightHelper);\n        }\n        break;\n\n      case 'point':\n        this.scene.add(this.pointLight);\n        break;\n\n      case 'hemi':\n        this.scene.add(this.hemiLight);\n        break;\n    }\n  }\n}\n","import * as THREE from 'three';\n\nimport OrbitControls from '../../utils/orbitControls';\nimport Config from '../../data/config';\n\n// Controls based on orbit controls\nexport default class Controls {\n  constructor(camera, container) {\n    // Orbit controls first needs to pass in THREE to constructor\n    const orbitControls = new OrbitControls(THREE);\n    this.threeControls = new orbitControls(camera, container);\n\n    this.init();\n  }\n\n  init() {\n    this.threeControls.target.set(Config.controls.target.x, Config.controls.target.y, Config.controls.target.z);\n    this.threeControls.autoRotate = Config.controls.autoRotate;\n    this.threeControls.autoRotateSpeed = Config.controls.autoRotateSpeed;\n    this.threeControls.rotateSpeed = Config.controls.rotateSpeed;\n    this.threeControls.zoomSpeed = Config.controls.zoomSpeed;\n    this.threeControls.minDistance = Config.controls.minDistance;\n    this.threeControls.maxDistance = Config.controls.maxDistance;\n    this.threeControls.minPolarAngle = Config.controls.minPolarAngle;\n    this.threeControls.maxPolarAngle = Config.controls.maxPolarAngle;\n    this.threeControls.enableDamping = Config.controls.enableDamping;\n    this.threeControls.enableZoom = Config.controls.enableZoom;\n    this.threeControls.dampingFactor = Config.controls.dampingFactor;\n  }\n}\n","import * as THREE from 'three';\nimport anime, { timeline } from \"animejs\";\nimport vars from \"./vars\";\nimport config from '../data/config';\n\nlet audio, equilizer, statueInside, readTimer, j = 0, audioPaused = true;\n\nlet pointer = new THREE.Raycaster(),\n    mouseXY = new THREE.Vector2(),\n    selected = null,\n    selectedID = null,\n    dots;\n\nlet bip, ambient, promise, musicBtn;\n\n// Controls based on orbit controls\nexport default class Events {\n  constructor(main) {\n    // do nothing;\n    this.main = main;\n  }\n\n  init(main) {\n\n    window.addEventListener(\"blur\", () => {\n      vars.isPaused = true;\n      if (promise !== undefined) {\n        promise.then(_ => {\n          ambient.pause();\n        }).catch(error => {\n          // do nothing\n        });\n      }\n    } );\n    window.addEventListener(\"focus\", () => {\n        vars.isPaused = false; \n        main.render();\n        if(!vars.mobile && !musicBtn.classList.contains(\"paused\")){\n          ambient.play();\n        }\n    } );\n\n    document.addEventListener(\"mousemove\", (e)=> this.onMouseMoveHandler(e), false);\n    bip = document.querySelector(\"audio.bip\");\n\n    let btns = document.querySelectorAll(\"button\");\n\n    for(var i=0; i<btns.length; ++i){\n      let btn = btns[i];\n      btn.addEventListener(\"click\", (e)=> this.buttonClickSwitcher(e), false );\n      btn.addEventListener(\"mouseenter\", (e)=> this.buttonHoverHandler(e), false);\n    }\n\n    musicBtn = document.querySelector(\"button.music\");\n    ambient = document.querySelector(\"audio.ambient\");\n    audio = document.querySelector(\"audio.vo\");\n    equilizer = document.querySelector(\".equilizer\");\n    equilizer.querySelectorAll(\"animate\").forEach(element => { element.setAttribute(\"repeatCount\", \"0\"); });\n    statueInside = document.querySelector(\".statue .inside\");\n    let voiceOverButton = statueInside.querySelector(\".bigBtn\");\n    voiceOverButton.addEventListener(\"click\", (e)=> this.onAudioClick(e), false );\n\n    main.container.addEventListener('click', (e)=> this.onMouseDownHandler(e), false);\n\n    dots = document.querySelectorAll(\"ul.milestones li\");\n\n  }\n\n  buttonHoverHandler(e){\n    promise = bip.play();\n    if (promise !== undefined) {\n      promise.then(_ => {\n        // Autoplay started!\n      }).catch(error => {\n        // Autoplay was prevented.\n        // Show a \"Play\" button so that user can start playback.\n      });\n    }\n  }\n\n  onMouseMoveHandler(e){\n    vars.mouseCoords = {x:e.clientX/vars.windowSize.width, y:e.clientY/vars.windowSize.height};\n    if(vars.isGlobeActive) this.handleIntersects(e);\n  }\n\n  handleIntersects(e){\n    mouseXY.set(\n      (e.clientX / vars.windowSize.width) * 2 - 1,\n      - (e.clientY / vars.windowSize.height) * 2+1\n    );\n\n    pointer.setFromCamera( mouseXY, vars.main.camera.threeCamera );\n\n    var intersects = pointer.intersectObjects( vars.main.globe.markers.children, true );\n    if( intersects.length > 0){\n      selected = intersects[0].object;\n      if( selectedID != selected.name){\n        selectedID = selected.name;\n        dots.forEach(element => {element.classList.remove(\"hover\"); });\n        dots[selected.name].classList.add(\"hover\");\n        this.buttonHoverHandler();\n      }\n    }else{\n      dots.forEach(element => {element.classList.remove(\"hover\"); });\n      selected = null;\n      selectedID = null;\n    }\n  }\n\n  onMouseDownHandler(){\n    if(selected != null){\n      this.markerClickHandler(selected.name);\n      selected = null;\n    }\n  }\n\n  buttonClickSwitcher(e){\n    let _this = this;\n    let c = e.target.getAttribute(\"id\");\n    bip.play();\n    switch(c){\n      case \"backBtn\" :\n        _this.backClickHandler();\n      break;\n      case \"nextBtn\" :\n        _this.nextClickHandler(\"NEXT\");\n      break;\n      case \"previousBtn\" :\n        _this.nextClickHandler(\"PREV\");\n      break;\n      case \"startBtn\" :\n        _this.startClickHandler();\n      break;\n      case \"introStartBtn\" :\n        _this.introStartClickHandler();\n      break;\n      case \"musicBtn\" :\n        _this.musicClickHandler();\n      break;\n      case \"readMoreBtn\" :\n        _this.readMoreClickHandler();\n      break;\n      case \"closeAboutBtn\" :\n        _this.closeAboutClickHandler();\n      break;\n    }\n  }\n\n  readMoreClickHandler(){\n    vars.isPaused = true;\n    vars.overlay.animateAbout();\n  }\n\n  closeAboutClickHandler(){\n    vars.isPaused = false;\n    vars.overlay.animateAboutClose();\n    vars.main.render();\n  }\n\n  musicClickHandler(){\n    if(musicBtn.classList.contains(\"paused\")){\n      musicBtn.classList.remove(\"paused\");\n      ambient.play();\n    }else{\n      musicBtn.classList.add(\"paused\");\n      ambient.pause();\n    }\n  }\n\n  introStartClickHandler(){\n    vars.isCutActive = false;\n    anime.timeline().add({\n      targets:vars.localPlanes,\n      constant: -500,\n      duration: 1000,\n      easing: \"easeInOutCubic\"\n    }).add({\n      targets:vars.localPlanes[1],\n      constant: 500,\n      duration: 1000,\n      easing: \"easeInOutCubic\",\n      complete:()=>{\n        vars.main.earth.dispose();\n      }\n    }, 0).add({\n      targets:vars.main.camera.threeCamera.position,\n      z: config.globeCamera.posZ,\n      duration: 2000,\n      easing: \"easeInOutCubic\",\n    }, 0);\n\n    vars.main.timeline.goto.globe();\n\n    if(!vars.mobile){\n      ambient.volume = .2;\n      ambient.play();\n      musicBtn.classList.remove(\"paused\");\n    }\n\n    setTimeout(()=>{\n      vars.main.globe.addMarkers();\n      setTimeout(()=>{ \n        vars.main.globe.showMarkers();\n        vars.main.controls.threeControls.enabled = true;\n        vars.isGlobeActive = true;\n      }, 1000);\n    }, 2000);\n  }\n\n  startClickHandler(){\n    vars.overlay.startGlobe();\n  }\n\n  nextClickHandler(DIRECTION){\n\n    j = 0;\n\n    vars.isMouseActive = false;\n    vars.isPauseLoopFunctions = true;\n\n    let milestone;\n\n    if(DIRECTION == \"NEXT\"){\n      milestone = vars.currentMilestone.id < vars.milestones.length-1 ? \n      vars.milestones[vars.currentMilestone.id+1] :\n      vars.milestones[0];\n    }else if(DIRECTION == \"PREV\"){\n      milestone = vars.currentMilestone.id > 0 ? \n      vars.milestones[vars.currentMilestone.id-1] :\n      vars.milestones[vars.milestones.length-1];\n    }else if(Number.isInteger(DIRECTION)){\n      milestone = vars.milestones[DIRECTION];\n    }\n\n    vars.currentMilestone = milestone;\n    vars.overlay.initCurtain(milestone);\n\n    anime({\n      targets: vars.main.platform.scene.rotation,\n      y:(Math.random() - .5) * 200 * THREE.Math.DEG2RAD,\n      x: Math.random() * 100 * THREE.Math.DEG2RAD,\n      easing: 'easeInOutExpo',\n      duration:2000, \n    });\n    \n    vars.main.warp(\"IN\", ()=>{\n      vars.main.timeline.goto.curtain();\n      setTimeout(() => {\n        vars.overlay.initStatue();\n        vars.main.resetPlatform();\n        vars.main.platform.addModel();\n        vars.overlay.animateCurtain(\"OUT\", ()=>{\n\n          vars.main.warp(\"OUT\", ()=>{\n            vars.main.timeline.goto.section();\n            vars.isMouseActive = true;\n            vars.isPauseLoopFunctions = false;\n          });\n        });\n      }, 1000);\n    });\n  }\n\n  backClickHandler(){\n    let milestone = vars.currentMilestone;\n\n    vars.isMouseActive = false;\n    vars.isPauseLoopFunctions = true;\n\n    let focused = document.querySelector(\".milestones li.focused\");\n    if(focused){\n      focused.classList.remove(\"focused\");\n    }\n\n    vars.main.warp(\"RIN\", ()=>{\n      vars.main.flipScene(0);\n      vars.main.disposePlatform();\n\n      var altitude = 100;\n      var coeff = 1+ altitude/(vars.globeRadius + 12);\n\n      vars.main.camera.threeCamera.position.set( milestone.position.x * coeff, milestone.position.y * coeff, milestone.position.z * coeff);\n      vars.main.camera.threeCamera.lookAt(0, 0, 0);\n\n      vars.main.warp(\"ROUT\", ()=>{\n\n        var altitude = 200;\n        var coeff = 1+ altitude/(vars.globeRadius + 12);\n\n        anime({\n          targets:vars.main.camera.threeCamera.position,\n          x: milestone.position.x * coeff,\n          y: milestone.position.y * coeff,\n          z: milestone.position.z * coeff,\n          duration:2000,\n          easing: 'easeOutCubic',\n          update: ()=>{ vars.main.camera.threeCamera.lookAt(0, 0, 0); },\n        })\n\n        vars.isMouseActive = true;\n        vars.isPauseLoopFunctions = false;\n        vars.isGlobeActive = true;\n\n        vars.main.timeline.goto.globe();\n      });\n    });\n  }\n\n  onAudioClick(e){\n\n    if(audioPaused){\n\n      audioPaused = false;\n\n      let count = statueInside.querySelector(\"p.off\").getAttribute(\"data-count\");\n      let words = statueInside.querySelectorAll(\"p.off span.letter\");\n      let time = vars.currentMilestone.time;\n      let tickTime = (time*0.92)/count;\n\n      audio.play();\n      equilizer.querySelectorAll(\"animate\").forEach(element => { element.setAttribute(\"repeatCount\", \"indefinite\"); });\n\n      statueInside.classList.add(\"cursor-pause\");\n      statueInside.classList.remove(\"cursor-play\");\n\n      readTimer = setInterval(()=>{ \n        words[j].style.cssText = \"opacity:1\";\n        if(j < words.length - 1){ \n          j++; \n        }else{\n          clearInterval(readTimer);\n          statueInside.classList.remove(\"cursor-pause\");\n          statueInside.classList.add(\"cursor-play\");\n          equilizer.querySelectorAll(\"animate\").forEach(element => { element.setAttribute(\"repeatCount\", \"0\"); });\n          j=0;\n          audioPaused = true;\n        }\n      \n      }, tickTime * 1000);\n\n    }else{\n      audioPaused = true;\n      audio.pause();\n      equilizer.querySelectorAll(\"animate\").forEach(element => { element.setAttribute(\"repeatCount\", \"0\"); });\n      clearInterval(readTimer);\n      statueInside.classList.remove(\"cursor-pause\");\n      statueInside.classList.add(\"cursor-play\");\n    }\n  }\n\n  /* global handlers */\n  milestoneClickHandler(n){\n\n    let id = parseInt(n.target.getAttribute(\"id\"));\n\n    j = 0;\n\n    if(vars.isGlobeActive == false && id != vars.currentMilestone.id){\n      this.nextClickHandler(id);\n    }\n    else if(vars.isGlobeActive == true){\n      if(vars.currentMilestone == null){\n        this.startClickHandler();\n      }\n      this.gotoMilestone(id);\n      vars.isGlobeActive = false;\n    }\n  }\n\n  markerClickHandler(id){\n    if(vars.currentMilestone == null){\n      this.startClickHandler();\n    }\n    this.gotoMilestone(id);\n    document.querySelector(\".milestones li.hover\").classList.remove(\"hover\");\n  }\n\n  gotoMilestone(id){\n    let _this = this;\n    let milestone = vars.milestones[id];\n\n    j = 0;\n    //this.startClickHandler();\n\n    vars.currentMilestone = milestone;\n\n    document.body.classList.add(\"hold\");\n\n    vars.overlay.initStatue();\n    vars.overlay.initCurtain(milestone);\n\n    vars.isMouseActive = false;\n    vars.isPauseLoopFunctions = true;\n\n    var altitude = 100;\n    var coeff = 1+ altitude/(vars.globeRadius + 12);\n\n    anime.timeline().add({\n      targets: vars.main.camera.threeCamera.position,\n      x: milestone.position.x * coeff,\n      y: milestone.position.y * coeff,\n      z: milestone.position.z * coeff,\n      duration:3000,\n      easing: 'easeInOutCubic',\n      update: ()=>{ vars.main.camera.threeCamera.lookAt(0, 0, 0); },\n      complete: ()=>{\n        _this.handleTransition();\n        vars.isGlobeActive = false;\n      }\n    }).add({\n      targets: vars.main.scene.rotation,\n      x:0,\n      y:0,\n      easing: 'easeInOutCubic',\n      duration:3000,\n    }, 0);\n  }\n\n  handleTransition(){\n    vars.main.warp(\"IN\", ()=>{\n      vars.main.timeline.goto.curtain();\n      setTimeout(() => {\n        vars.main.flipScene(1);\n        vars.main.initPlatform();\n        setTimeout(()=>{\n          vars.overlay.animateCurtain(\"OUT\", ()=>{\n\n            anime({\n              targets: vars.main.platform.scene.rotation,\n              y:[(Math.random() - .5) * 200 * THREE.Math.DEG2RAD, 0],\n              x:[30 * THREE.Math.DEG2RAD, 0],\n              easing: 'easeInOutExpo',\n              duration:5000, \n            });\n\n            vars.main.warp(\"OUT\", ()=>{\n              vars.main.timeline.goto.section();\n              vars.isMouseActive = true;\n              vars.isPauseLoopFunctions = false;\n            });\n          });\n        }, 555);\n      }, 1000);\n\n      //\n\n    });\n  }\n\n}\n","import vars from \"./vars\";\n\nvar fx = {\n\n  // Check if browser supports WebGL\n  hasWebGL: () => {\n    var canvas = document.createElement(\"canvas\");\n    const gl =\n          canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\");\n    if (gl && gl instanceof WebGLRenderingContext) {\n      return true;\n    } \n    return false;\n        \n  },\n\n  // Convert Flat Coordinates to Sphere Coordinates\n  convertFlatCoordsToSphereCoords: (x, y, globeRadius, globeWidth, globeHeight) => {\n    let latitude = ((x - globeWidth) / globeWidth) * -180;\n    let longitude = ((y - globeHeight) / globeHeight) * -90;\n    latitude = (latitude * Math.PI) / 180;\n    longitude = (longitude * Math.PI) / 180;\n    const radius = Math.cos(longitude) * globeRadius;\n\n    return {\n      x: Math.cos(latitude) * radius,\n      y: Math.sin(longitude) * globeRadius,\n      z: Math.sin(latitude) * radius\n    };\n  },\n\n  //check if point is inside a circle\n  isPointInsideCircle(centerX, centerY, radius, pX, pY) {\n    var dist_points = (centerX - pX) * (centerX - pX) + (centerY - pY) * (centerY - pY);\n    radius *= radius;\n    if (dist_points < radius) {\n      return true;\n    }\n    return false;\n  },\n\n  removeFromLoop: (fx) => {\n    const loopFunctions = vars.loopFunctions;\n    for (var i in loopFunctions)\n      if (loopFunctions[i][1] === fx) loopFunctions.splice(i, 1);\n  },\n\n  // mobile detection\n  isMobile(){\n    let check = false;\n    (function (a) { if (window.innerWidth < 1000 || /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\n    return check;\n  }\n}\n\nexport default fx;\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport {\n  BufferAttribute,\n  BufferGeometry,\n  InterleavedBuffer,\n  InterleavedBufferAttribute,\n  TriangleFanDrawMode,\n  TriangleStripDrawMode,\n  TrianglesDrawMode,\n  Vector2,\n  Vector3,\n} from 'three';\n\nvar BufferGeometryUtils = {\n  computeTangents: function (geometry) {\n    var index = geometry.index;\n    var attributes = geometry.attributes;\n\n    // based on http://www.terathon.com/code/tangent.html\n    // (per vertex tangents)\n\n    if (\n      index === null ||\n      attributes.position === undefined ||\n      attributes.normal === undefined ||\n      attributes.uv === undefined\n    ) {\n      console.error(\n        'THREE.BufferGeometryUtils: .computeTangents() failed. Missing required attributes (index, position, normal or uv)'\n      );\n      return;\n    }\n\n    var indices = index.array;\n    var positions = attributes.position.array;\n    var normals = attributes.normal.array;\n    var uvs = attributes.uv.array;\n\n    var nVertices = positions.length / 3;\n\n    if (attributes.tangent === undefined) {\n      geometry.setAttribute('tangent', new BufferAttribute(new Float32Array(4 * nVertices), 4));\n    }\n\n    var tangents = attributes.tangent.array;\n\n    var tan1 = [],\n      tan2 = [];\n\n    for (var i = 0; i < nVertices; i++) {\n      tan1[i] = new Vector3();\n      tan2[i] = new Vector3();\n    }\n\n    var vA = new Vector3(),\n      vB = new Vector3(),\n      vC = new Vector3(),\n      uvA = new Vector2(),\n      uvB = new Vector2(),\n      uvC = new Vector2(),\n      sdir = new Vector3(),\n      tdir = new Vector3();\n\n    function handleTriangle(a, b, c) {\n      vA.fromArray(positions, a * 3);\n      vB.fromArray(positions, b * 3);\n      vC.fromArray(positions, c * 3);\n\n      uvA.fromArray(uvs, a * 2);\n      uvB.fromArray(uvs, b * 2);\n      uvC.fromArray(uvs, c * 2);\n\n      vB.sub(vA);\n      vC.sub(vA);\n\n      uvB.sub(uvA);\n      uvC.sub(uvA);\n\n      var r = 1.0 / (uvB.x * uvC.y - uvC.x * uvB.y);\n\n      // silently ignore degenerate uv triangles having coincident or colinear vertices\n\n      if (!isFinite(r)) return;\n\n      sdir.copy(vB).multiplyScalar(uvC.y).addScaledVector(vC, -uvB.y).multiplyScalar(r);\n      tdir.copy(vC).multiplyScalar(uvB.x).addScaledVector(vB, -uvC.x).multiplyScalar(r);\n\n      tan1[a].add(sdir);\n      tan1[b].add(sdir);\n      tan1[c].add(sdir);\n\n      tan2[a].add(tdir);\n      tan2[b].add(tdir);\n      tan2[c].add(tdir);\n    }\n\n    var groups = geometry.groups;\n\n    if (groups.length === 0) {\n      groups = [\n        {\n          start: 0,\n          count: indices.length,\n        },\n      ];\n    }\n\n    for (var i = 0, il = groups.length; i < il; ++i) {\n      var group = groups[i];\n\n      var start = group.start;\n      var count = group.count;\n\n      for (var j = start, jl = start + count; j < jl; j += 3) {\n        handleTriangle(indices[j + 0], indices[j + 1], indices[j + 2]);\n      }\n    }\n\n    var tmp = new Vector3(),\n      tmp2 = new Vector3();\n    var n = new Vector3(),\n      n2 = new Vector3();\n    var w, t, test;\n\n    function handleVertex(v) {\n      n.fromArray(normals, v * 3);\n      n2.copy(n);\n\n      t = tan1[v];\n\n      // Gram-Schmidt orthogonalize\n\n      tmp.copy(t);\n      tmp.sub(n.multiplyScalar(n.dot(t))).normalize();\n\n      // Calculate handedness\n\n      tmp2.crossVectors(n2, t);\n      test = tmp2.dot(tan2[v]);\n      w = test < 0.0 ? -1.0 : 1.0;\n\n      tangents[v * 4] = tmp.x;\n      tangents[v * 4 + 1] = tmp.y;\n      tangents[v * 4 + 2] = tmp.z;\n      tangents[v * 4 + 3] = w;\n    }\n\n    for (var i = 0, il = groups.length; i < il; ++i) {\n      var group = groups[i];\n\n      var start = group.start;\n      var count = group.count;\n\n      for (var j = start, jl = start + count; j < jl; j += 3) {\n        handleVertex(indices[j + 0]);\n        handleVertex(indices[j + 1]);\n        handleVertex(indices[j + 2]);\n      }\n    }\n  },\n\n  /**\n   * @param  {Array<BufferGeometry>} geometries\n   * @param  {Boolean} useGroups\n   * @return {BufferGeometry}\n   */\n  mergeBufferGeometries: function (geometries, useGroups) {\n    var isIndexed = geometries[0].index !== null;\n\n    var attributesUsed = new Set(Object.keys(geometries[0].attributes));\n    var morphAttributesUsed = new Set(Object.keys(geometries[0].morphAttributes));\n\n    var attributes = {};\n    var morphAttributes = {};\n\n    var morphTargetsRelative = geometries[0].morphTargetsRelative;\n\n    var mergedGeometry = new BufferGeometry();\n\n    var offset = 0;\n\n    for (var i = 0; i < geometries.length; ++i) {\n      var geometry = geometries[i];\n      var attributesCount = 0;\n\n      // ensure that all geometries are indexed, or none\n\n      if (isIndexed !== (geometry.index !== null)) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n          i +\n          '. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.'\n        );\n        return null;\n      }\n\n      // gather attributes, exit early if they're different\n\n      for (var name in geometry.attributes) {\n        if (!attributesUsed.has(name)) {\n          console.error(\n            'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n            i +\n            '. All geometries must have compatible attributes; make sure \"' +\n            name +\n            '\" attribute exists among all geometries, or in none of them.'\n          );\n          return null;\n        }\n\n        if (attributes[name] === undefined) attributes[name] = [];\n\n        attributes[name].push(geometry.attributes[name]);\n\n        attributesCount++;\n      }\n\n      // ensure geometries have the same number of attributes\n\n      if (attributesCount !== attributesUsed.size) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n          i +\n          '. Make sure all geometries have the same number of attributes.'\n        );\n        return null;\n      }\n\n      // gather morph attributes, exit early if they're different\n\n      if (morphTargetsRelative !== geometry.morphTargetsRelative) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n          i +\n          '. .morphTargetsRelative must be consistent throughout all geometries.'\n        );\n        return null;\n      }\n\n      for (var name in geometry.morphAttributes) {\n        if (!morphAttributesUsed.has(name)) {\n          console.error(\n            'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n            i +\n            '.  .morphAttributes must be consistent throughout all geometries.'\n          );\n          return null;\n        }\n\n        if (morphAttributes[name] === undefined) morphAttributes[name] = [];\n\n        morphAttributes[name].push(geometry.morphAttributes[name]);\n      }\n\n      // gather .userData\n\n      mergedGeometry.userData.mergedUserData = mergedGeometry.userData.mergedUserData || [];\n      mergedGeometry.userData.mergedUserData.push(geometry.userData);\n\n      if (useGroups) {\n        var count;\n\n        if (isIndexed) {\n          count = geometry.index.count;\n        } else if (geometry.attributes.position !== undefined) {\n          count = geometry.attributes.position.count;\n        } else {\n          console.error(\n            'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n            i +\n            '. The geometry must have either an index or a position attribute'\n          );\n          return null;\n        }\n\n        mergedGeometry.addGroup(offset, count, i);\n\n        offset += count;\n      }\n    }\n\n    // merge indices\n\n    if (isIndexed) {\n      var indexOffset = 0;\n      var mergedIndex = [];\n\n      for (var i = 0; i < geometries.length; ++i) {\n        var index = geometries[i].index;\n\n        for (var j = 0; j < index.count; ++j) {\n          mergedIndex.push(index.getX(j) + indexOffset);\n        }\n\n        indexOffset += geometries[i].attributes.position.count;\n      }\n\n      mergedGeometry.setIndex(mergedIndex);\n    }\n\n    // merge attributes\n\n    for (var name in attributes) {\n      var mergedAttribute = this.mergeBufferAttributes(attributes[name]);\n\n      if (!mergedAttribute) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the ' +\n          name +\n          ' attribute.'\n        );\n        return null;\n      }\n\n      mergedGeometry.setAttribute(name, mergedAttribute);\n    }\n\n    // merge morph attributes\n\n    for (var name in morphAttributes) {\n      var numMorphTargets = morphAttributes[name][0].length;\n\n      if (numMorphTargets === 0) break;\n\n      mergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n      mergedGeometry.morphAttributes[name] = [];\n\n      for (var i = 0; i < numMorphTargets; ++i) {\n        var morphAttributesToMerge = [];\n\n        for (var j = 0; j < morphAttributes[name].length; ++j) {\n          morphAttributesToMerge.push(morphAttributes[name][j][i]);\n        }\n\n        var mergedMorphAttribute = this.mergeBufferAttributes(morphAttributesToMerge);\n\n        if (!mergedMorphAttribute) {\n          console.error(\n            'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the ' +\n            name +\n            ' morphAttribute.'\n          );\n          return null;\n        }\n\n        mergedGeometry.morphAttributes[name].push(mergedMorphAttribute);\n      }\n    }\n\n    return mergedGeometry;\n  },\n\n  /**\n   * @param {Array<BufferAttribute>} attributes\n   * @return {BufferAttribute}\n   */\n  mergeBufferAttributes: function (attributes) {\n    var TypedArray;\n    var itemSize;\n    var normalized;\n    var arrayLength = 0;\n\n    for (var i = 0; i < attributes.length; ++i) {\n      var attribute = attributes[i];\n\n      if (attribute.isInterleavedBufferAttribute) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported.'\n        );\n        return null;\n      }\n\n      if (TypedArray === undefined) TypedArray = attribute.array.constructor;\n      if (TypedArray !== attribute.array.constructor) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.'\n        );\n        return null;\n      }\n\n      if (itemSize === undefined) itemSize = attribute.itemSize;\n      if (itemSize !== attribute.itemSize) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.'\n        );\n        return null;\n      }\n\n      if (normalized === undefined) normalized = attribute.normalized;\n      if (normalized !== attribute.normalized) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.'\n        );\n        return null;\n      }\n\n      arrayLength += attribute.array.length;\n    }\n\n    var array = new TypedArray(arrayLength);\n    var offset = 0;\n\n    for (var i = 0; i < attributes.length; ++i) {\n      array.set(attributes[i].array, offset);\n\n      offset += attributes[i].array.length;\n    }\n\n    return new BufferAttribute(array, itemSize, normalized);\n  },\n\n  /**\n   * @param {Array<BufferAttribute>} attributes\n   * @return {Array<InterleavedBufferAttribute>}\n   */\n  interleaveAttributes: function (attributes) {\n    // Interleaves the provided attributes into an InterleavedBuffer and returns\n    // a set of InterleavedBufferAttributes for each attribute\n    var TypedArray;\n    var arrayLength = 0;\n    var stride = 0;\n\n    // calculate the the length and type of the interleavedBuffer\n    for (var i = 0, l = attributes.length; i < l; ++i) {\n      var attribute = attributes[i];\n\n      if (TypedArray === undefined) TypedArray = attribute.array.constructor;\n      if (TypedArray !== attribute.array.constructor) {\n        console.error('AttributeBuffers of different types cannot be interleaved');\n        return null;\n      }\n\n      arrayLength += attribute.array.length;\n      stride += attribute.itemSize;\n    }\n\n    // Create the set of buffer attributes\n    var interleavedBuffer = new InterleavedBuffer(new TypedArray(arrayLength), stride);\n    var offset = 0;\n    var res = [];\n    var getters = ['getX', 'getY', 'getZ', 'getW'];\n    var setters = ['setX', 'setY', 'setZ', 'setW'];\n\n    for (var j = 0, l = attributes.length; j < l; j++) {\n      var attribute = attributes[j];\n      var itemSize = attribute.itemSize;\n      var count = attribute.count;\n      var iba = new InterleavedBufferAttribute(\n        interleavedBuffer,\n        itemSize,\n        offset,\n        attribute.normalized\n      );\n      res.push(iba);\n\n      offset += itemSize;\n\n      // Move the data for each attribute into the new interleavedBuffer\n      // at the appropriate offset\n      for (var c = 0; c < count; c++) {\n        for (var k = 0; k < itemSize; k++) {\n          iba[setters[k]](c, attribute[getters[k]](c));\n        }\n      }\n    }\n\n    return res;\n  },\n\n  /**\n   * @param {Array<BufferGeometry>} geometry\n   * @return {number}\n   */\n  estimateBytesUsed: function (geometry) {\n    // Return the estimated memory used by this geometry in bytes\n    // Calculate using itemSize, count, and BYTES_PER_ELEMENT to account\n    // for InterleavedBufferAttributes.\n    var mem = 0;\n    for (var name in geometry.attributes) {\n      var attr = geometry.getAttribute(name);\n      mem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\n    }\n\n    var indices = geometry.getIndex();\n    mem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\n    return mem;\n  },\n\n  /**\n   * @param {BufferGeometry} geometry\n   * @param {number} tolerance\n   * @return {BufferGeometry>}\n   */\n  mergeVertices: function (geometry, tolerance = 1e-4) {\n    tolerance = Math.max(tolerance, Number.EPSILON);\n\n    // Generate an index buffer if the geometry doesn't have one, or optimize it\n    // if it's already available.\n    var hashToIndex = {};\n    var indices = geometry.getIndex();\n    var positions = geometry.getAttribute('position');\n    var vertexCount = indices ? indices.count : positions.count;\n\n    // next value for triangle indices\n    var nextIndex = 0;\n\n    // attributes and new attribute arrays\n    var attributeNames = Object.keys(geometry.attributes);\n    var attrArrays = {};\n    var morphAttrsArrays = {};\n    var newIndices = [];\n    var getters = ['getX', 'getY', 'getZ', 'getW'];\n\n    // initialize the arrays\n    for (var i = 0, l = attributeNames.length; i < l; i++) {\n      var name = attributeNames[i];\n\n      attrArrays[name] = [];\n\n      var morphAttr = geometry.morphAttributes[name];\n      if (morphAttr) {\n        morphAttrsArrays[name] = new Array(morphAttr.length).fill().map(() => []);\n      }\n    }\n\n    // convert the error tolerance to an amount of decimal places to truncate to\n    var decimalShift = Math.log10(1 / tolerance);\n    var shiftMultiplier = Math.pow(10, decimalShift);\n    for (var i = 0; i < vertexCount; i++) {\n      var index = indices ? indices.getX(i) : i;\n\n      // Generate a hash for the vertex attributes at the current index 'i'\n      var hash = '';\n      for (var j = 0, l = attributeNames.length; j < l; j++) {\n        var name = attributeNames[j];\n        var attribute = geometry.getAttribute(name);\n        var itemSize = attribute.itemSize;\n\n        for (var k = 0; k < itemSize; k++) {\n          // double tilde truncates the decimal value\n          hash += `${~~(attribute[getters[k]](index) * shiftMultiplier)},`;\n        }\n      }\n\n      // Add another reference to the vertex if it's already\n      // used by another index\n      if (hash in hashToIndex) {\n        newIndices.push(hashToIndex[hash]);\n      } else {\n        // copy data to the new index in the attribute arrays\n        for (var j = 0, l = attributeNames.length; j < l; j++) {\n          var name = attributeNames[j];\n          var attribute = geometry.getAttribute(name);\n          var morphAttr = geometry.morphAttributes[name];\n          var itemSize = attribute.itemSize;\n          var newarray = attrArrays[name];\n          var newMorphArrays = morphAttrsArrays[name];\n\n          for (var k = 0; k < itemSize; k++) {\n            var getterFunc = getters[k];\n            newarray.push(attribute[getterFunc](index));\n\n            if (morphAttr) {\n              for (var m = 0, ml = morphAttr.length; m < ml; m++) {\n                newMorphArrays[m].push(morphAttr[m][getterFunc](index));\n              }\n            }\n          }\n        }\n\n        hashToIndex[hash] = nextIndex;\n        newIndices.push(nextIndex);\n        nextIndex++;\n      }\n    }\n\n    // Generate typed arrays from new attribute arrays and update\n    // the attributeBuffers\n    const result = geometry.clone();\n    for (var i = 0, l = attributeNames.length; i < l; i++) {\n      var name = attributeNames[i];\n      var oldAttribute = geometry.getAttribute(name);\n\n      var buffer = new oldAttribute.array.constructor(attrArrays[name]);\n      var attribute = new BufferAttribute(buffer, oldAttribute.itemSize, oldAttribute.normalized);\n\n      result.setAttribute(name, attribute);\n\n      // Update the attribute arrays\n      if (name in morphAttrsArrays) {\n        for (var j = 0; j < morphAttrsArrays[name].length; j++) {\n          var oldMorphAttribute = geometry.morphAttributes[name][j];\n\n          var buffer = new oldMorphAttribute.array.constructor(morphAttrsArrays[name][j]);\n          var morphAttribute = new BufferAttribute(\n            buffer,\n            oldMorphAttribute.itemSize,\n            oldMorphAttribute.normalized\n          );\n          result.morphAttributes[name][j] = morphAttribute;\n        }\n      }\n    }\n\n    // indices\n\n    result.setIndex(newIndices);\n\n    return result;\n  },\n\n  /**\n   * @param {BufferGeometry} geometry\n   * @param {number} drawMode\n   * @return {BufferGeometry>}\n   */\n  toTrianglesDrawMode: function (geometry, drawMode) {\n    if (drawMode === TrianglesDrawMode) {\n      console.warn(\n        'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.'\n      );\n      return geometry;\n    }\n\n    if (drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode) {\n      var index = geometry.getIndex();\n\n      // generate index if not present\n\n      if (index === null) {\n        var indices = [];\n\n        var position = geometry.getAttribute('position');\n\n        if (position !== undefined) {\n          for (var i = 0; i < position.count; i++) {\n            indices.push(i);\n          }\n\n          geometry.setIndex(indices);\n          index = geometry.getIndex();\n        } else {\n          console.error(\n            'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.'\n          );\n          return geometry;\n        }\n      }\n\n      //\n\n      var numberOfTriangles = index.count - 2;\n      var newIndices = [];\n\n      if (drawMode === TriangleFanDrawMode) {\n        // gl.TRIANGLE_FAN\n\n        for (var i = 1; i <= numberOfTriangles; i++) {\n          newIndices.push(index.getX(0));\n          newIndices.push(index.getX(i));\n          newIndices.push(index.getX(i + 1));\n        }\n      } else {\n        // gl.TRIANGLE_STRIP\n\n        for (var i = 0; i < numberOfTriangles; i++) {\n          if (i % 2 === 0) {\n            newIndices.push(index.getX(i));\n            newIndices.push(index.getX(i + 1));\n            newIndices.push(index.getX(i + 2));\n          } else {\n            newIndices.push(index.getX(i + 2));\n            newIndices.push(index.getX(i + 1));\n            newIndices.push(index.getX(i));\n          }\n        }\n      }\n\n      if (newIndices.length / 3 !== numberOfTriangles) {\n        console.error(\n          'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.'\n        );\n      }\n\n      // build final geometry\n\n      var newGeometry = geometry.clone();\n      newGeometry.setIndex(newIndices);\n      newGeometry.clearGroups();\n\n      return newGeometry;\n    }\n\n    console.error('THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:', drawMode);\n    return geometry;\n  },\n};\n\nexport { BufferGeometryUtils };\n","// Global imports -\nimport * as THREE from 'three';\nimport { BufferGeometryUtils } from '../../utils/bufferGeometryUtils';\nimport SimplexNoise from 'simplex-noise';\nimport anime from 'animejs';\n\nimport fx from '../fx';\nimport vars from '../vars';\n\nimport * as data from '../../data/points.json';\n\nconst matrix = new THREE.Matrix4();\n\nconst markers = new THREE.Object3D();\n\nconst simplex = new SimplexNoise();\nvar blob, ring, ring2, ring3;\n\nconst globe = new THREE.Object3D();\nconst flies = new THREE.Object3D();\n\nvar localPlane;\n\nexport default class Globe {\n  constructor(main) {\n    if (fx.hasWebGL()) {\n      this.init(main);\n    }\n\n    this.markers = markers;\n  }\n  \n  init(main) {\n\n    this.scene = main.scene;\n\n    const blobGeometry = new THREE.IcosahedronGeometry( vars.globeRadius - 2, 10 );\n    blobGeometry.setAttribute(\"basePosition\", new THREE.BufferAttribute().copy(blobGeometry.attributes.position));\n    var blobMaterial = new THREE.MeshPhysicalMaterial({\n      color: 0x000957,\n      emissive: 0x002B7E,\n      emissiveIntensity:.1,\n      transparent:true,\n      opacity:1,\n      depthTest: true,\n      depthWrite: true,\n      flatShading:true,\n      roughness:.8,\n      metalness:.2,\n      reflectivity:1.95,\n    });\n    blob = new THREE.Mesh( blobGeometry, blobMaterial );\n    globe.add( blob );\n        \n    ring = new THREE.Mesh(\n      new THREE.CylinderGeometry( vars.globeRadius *2.4, vars.globeRadius *2.4, 1, 36, 1, true),\n      new THREE.MeshBasicMaterial( {color:0xFFFFFF, side:THREE.DoubleSide, transparent:true, opacity:.2 })\n    );\n    ring.rotation.set(30 * THREE.Math.DEG2RAD, 0, 45 * THREE.Math.DEG2RAD);\n    globe.add(ring);\n\n    ring2 = new THREE.Mesh(\n      new THREE.CylinderGeometry( vars.globeRadius * 3.3, vars.globeRadius * 3.3, 1, 36, 1, true),\n      new THREE.MeshBasicMaterial( {color:0x38B0FF, side:THREE.DoubleSide, transparent:true, opacity:.2 })\n    );\n    ring2.rotation.set(-45 * THREE.Math.DEG2RAD, 0, -30 * THREE.Math.DEG2RAD);\n    globe.add(ring2);\n\n    ring3 = new THREE.Mesh(\n      new THREE.CylinderGeometry( vars.globeRadius * 3.5, vars.globeRadius *3.5, 1, 36, 1, true),\n      new THREE.MeshBasicMaterial( {color:0x38B0FF, side:THREE.DoubleSide, transparent:true, opacity:.4 })\n    );\n    ring3.rotation.set(-15 * THREE.Math.DEG2RAD, 0, 10 * THREE.Math.DEG2RAD);\n    globe.add(ring3);\n\n    //vars.loopFunctions.push([this.animatePositions, \"ANIMATE_EARTH\", 0]);\n        \n    localPlane = new THREE.Plane( new THREE.Vector3( 1, -0.1, 0 ), -100);\n    vars.localPlanes[1] = localPlane;\n\n    this.mergedGeometry = new THREE.BufferGeometry();\n    this.pointGeometry = new THREE.SphereBufferGeometry(.4,1,1);\n    this.pointGeometry2 = new THREE.SphereBufferGeometry(.7,1,1);\n    this.pointMaterial = new THREE.MeshBasicMaterial({\n      color:0x9D92F3,\n      clippingPlanes: [localPlane],\n      clipShadows: true,\n    });\n    //this.pointMaterial = new THREE.MeshBasicMaterial({color:\"#9145B6\"});\n\n    const geometries = [];\n    for (const point of data.points) {\n      const { x, y, z } = fx.convertFlatCoordsToSphereCoords(\n        point.x,\n        point.y,\n        vars.globeRadius + 0,\n        2040,\n        1000\n      );\n\n      if (x && y && z) {\n        matrix.makeTranslation( x, y, z );\n\n        const k = Math.random() > .25 ? \n          geometries.push(this.pointGeometry.clone().applyMatrix4(matrix))\n          : geometries.push(this.pointGeometry2.clone().applyMatrix4(matrix));\n\n      }\n    }\n\n    this.mergedGeometry = BufferGeometryUtils.mergeBufferGeometries(geometries);\n    this.globeShape = new THREE.Mesh(this.mergedGeometry, this.pointMaterial);\n    //this.globeShape.rotation.y = -40 * THREE.Math.DEG2RAD;\n    globe.add(this.globeShape);\n\n    /*\n    for(var i=0; i<vars.milestones.length; ++i){\n      this.addMarker(vars.milestones[i].coords, i);\n    }\n    */\n    globe.add(markers);\n\n    //this.addFireflies(main);\n\n    //vars.loopFunctions.push([this.animateGlobe, \"ANIMATE_GLOBE\", 0]);\n\n    this.scene.add(globe);\n\n  }\n\n  addMarkers(){\n\n    for(var i=0; i<vars.milestones.length; ++i){\n      this.addMarker(vars.milestones[i].coords, i);\n    }\n    globe.add(markers);\n  }\n\n  showMarkers(){\n    for(var i=0; i<markers.children.length; ++i){\n      let _m = markers.children[i];\n      anime({\n        targets: _m.children[1].material.uniforms.opacity,\n        value: 0.4,\n        duration: 3000,\n      });\n    }\n  }\n\n  addMarker(obj, i){\n    this.marker = new THREE.Object3D();\n\n    const grassMaterial = new THREE.ShaderMaterial({\n      side:THREE.DoubleSide,\n      transparent:true,\n      depthTest:false,\n      uniforms: {\n        color1: {\n          value: new THREE.Color(0x38B0FF)\n        },\n        color2: {\n          value: new THREE.Color(0x003DB2)\n        },\n        opacity: {\n          value: 0.0\n        },\n        needsUpdate: true,\n      },\n      vertexShader: `\n                varying vec2 vUv;\n            \n                void main() {\n                  vUv = uv;\n                  gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n                }\n              `,\n      fragmentShader: `\n                uniform vec3 color1;\n                uniform vec3 color2;\n                uniform float opacity;\n              \n                varying vec2 vUv;\n                \n                void main() {\n                  \n                  gl_FragColor = vec4(mix(color1, color2, vUv.y), opacity);\n                }\n              `\n    });\n\n    const cylinderGeom = vars.mobile ? new THREE.CylinderGeometry(2, 6, 34, 16, 1, true) : new THREE.CylinderGeometry(1, 3, 24, 16, 1, true);\n\n    const mesh = new THREE.Mesh(\n      cylinderGeom,\n      grassMaterial\n    )\n    mesh.name = i;\n\n    var latRad = obj.lat * (Math.PI / 180);\n    var lonRad = -obj.lng * (Math.PI / 180);\n    var r = vars.globeRadius + 12;\n        \n    this.marker.position.set(\n      Math.cos(latRad) * Math.cos(lonRad) * r, \n      Math.sin(latRad) * r, \n      Math.cos(latRad) * Math.sin(lonRad) * r\n    );\n    this.marker.rotation.set(0.0, -lonRad, latRad - Math.PI * 0.5);\n\n    const sphere = new THREE.SphereGeometry( .2, 3, 3 );\n    const light = new THREE.PointLight( 0x009AFF, 2, 25 );\n    light.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0x009AFF } ) ) );\n    light.position.set(0, 5, 0);\n    this.marker.add(light);\n\n    vars.milestones[i].position = this.marker.position;\n\n    this.marker.add(mesh);\n\n    markers.add(this.marker);\n\n  }\n\n  addFireflies(main){\n\n    this.scene = main.scene;\n\n    const sphere = new THREE.SphereGeometry( .4, 3, 3 );\n\n    const v =  vars.globeRadius * .6;\n\n    //lights\n    const light1 = new THREE.PointLight( 0xff0040, 2, 30 );\n    light1.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0xff0040 } ) ) );\n    light1.position.set(v, v, -v);\n    flies.add( light1 );\n\n    const light2 = new THREE.PointLight( 0x0040ff, 2, 30 );\n    light2.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0x0040ff } ) ) );\n    light2.position.set(-v, -v, -v);\n    flies.add( light2 );\n\n    const light3 = new THREE.PointLight( 0x80ff80, 2, 30 );\n    light3.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0x80ff80 } ) ) );\n    light3.position.set(v, -v, v);\n    flies.add( light3 );\n\n    const light4 = new THREE.PointLight( 0xffaa00, 2, 30 );\n    light4.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0xffaa00 } ) ) );\n    light4.position.set(-v, v, v);\n    flies.add( light4 );\n\n    flies.position.y = 0;\n\n    this.scene.add( flies );\n\n    //vars.loopFunctions.push([this.animateFlies, \"ANIMATE_FLIES\"]);\n  }\n\n  animateFlies(time){\n\n    flies.rotation.y += .003;\n    flies.rotation.x += .002;\n\n    /*\n        \n        time = time * 0.0005;\n        \n        let light1 = flies.children[0];\n        let light2 = flies.children[1];\n        let light3 = flies.children[2];\n        let light4 = flies.children[3];\n\n        let radius = vars.globeRadius;\n\n        light1.position.x = Math.sin( time * 0.7 ) * radius;\n        light1.position.y = Math.sin( time * 0.5 ) * radius;\n        light1.position.z = Math.cos( time * 0.3 ) * radius;\n\n        light2.position.x = Math.cos( time * 0.3 ) * radius;\n        light2.position.y = Math.sin( time * 0.5 ) * radius;\n        light2.position.z = Math.sin( time * 0.7 ) * radius;\n\n        light3.position.x = Math.sin( time * 0.7 ) * radius;\n        light3.position.y = Math.cos( time * 0.3 ) * radius;\n        light3.position.z = Math.sin( time * 0.5 ) * radius;\n\n        light4.position.x = Math.sin( time * 0.3 ) * radius;\n        light4.position.y = Math.cos( time * 0.7 ) * radius;\n        light4.position.z = Math.sin( time * 0.5 ) * radius;\n\n        */\n  }\n\n  animatePositions(a){\n    const basePositionAttribute = blob.geometry.getAttribute(\"basePosition\");\n    const positionAttribute = blob.geometry.getAttribute( 'position' );\n    const newPositionAttribute = [];\n    const vertex = new THREE.Vector3();\n\n    for ( let vertexIndex = 0; vertexIndex < positionAttribute.count; vertexIndex++ ) {\n\n      vertex.fromBufferAttribute( basePositionAttribute, vertexIndex );\n\n      var perlin = simplex.noise3D(\n        vertex.x * 0.0095 + a * 0.0002,\n        vertex.y * 0.0095 + a * 0.0004,\n        vertex.z * 0.0095 );\n\n      //var ratio = perlin * 0.4 * ( mouse.y + 0.1 ) + 0.8;\n      var ratio = perlin * 0.4 * 0.1 + 0.8;\n      vertex.multiplyScalar( ratio );\n\n      positionAttribute.setXYZ(vertexIndex, vertex.x, vertex.y, vertex.z);\n\n    }\n\n    blob.geometry.attributes.position.needsUpdate = true; // required after the first render\n    blob.geometry.computeBoundingSphere();\n\n    //ring.rotation.y -= 0.001;\n    //ring2.rotation.y += 0.002;\n  }\n\n  animateGlobe(){\n    globe.rotation.y += .008;\n  }\n\n}\n","// Global imports -\nimport anime from 'animejs';\nimport * as THREE from 'three';\nimport vars from '../vars';\nimport fx from '../fx';\n\nlet clouds, earthBall;\nvar localPlane;\n\nexport default class Earth {\n  constructor(main) {\n    this.init(main);\n  }\n  \n  init(main) {\n\n    this.scene = main.scene;\n\n    this.object = new THREE.Object3D();\n        \n    localPlane = new THREE.Plane( new THREE.Vector3( -1, 0.1, 0 ), 100);\n    vars.localPlanes[0] = localPlane;\n\n    var geometry = new THREE.SphereGeometry(vars.globeRadius, 32, 32);\n\n    const mapTexture = new THREE.TextureLoader().load( '/assets/textures/map2.jpg' );\n    mapTexture.matrix.rotate(.2);\n    const elevMap = new THREE.TextureLoader().load( '/assets/textures/elevation2.jpg' );\n    const waterMap = new THREE.TextureLoader().load( 'assets/textures/water.png' );\n    const cloudsTexture = new THREE.TextureLoader().load( 'assets/textures/clouds.png' );\n\n    var material = new THREE.MeshPhongMaterial({\n      map: mapTexture,\n      bumpMap: elevMap,\n      bumpScale: .005,\n      specularMap: waterMap,\n      specular: new THREE.Color( 0xDDDDDD ),\n      clippingPlanes: [localPlane],\n      clipShadows: true,\n    });\n\n    earthBall = new THREE.Mesh(geometry, material);\n    clouds = new THREE.Mesh(\n      new THREE.SphereGeometry(vars.globeRadius + 5, 32, 32),\n      new THREE.MeshStandardMaterial({\n        map: cloudsTexture,\n        transparent: true,\n        roughness: .9,\n        clippingPlanes: [localPlane],\n        clipShadows: true,\n      })\n    );\n\n    this.object.add(earthBall);\n    this.object.add(clouds);\n\n    this.object.rotation.y = 140 * THREE.Math.DEG2RAD; \n    this.object.position.z = -1000;\n\n    this.scene.add(this.object);\n\n    vars.loopFunctions.push([this.animateEarth, \"ANIMATE_EARTH\", 0]);\n\n    return this.object;\n  }\n\n  dispose(){\n    fx.removeFromLoop(\"ANIMATE_EARTH\");\n\n    var parent = this.object;\n    for (var i = parent.children.length - 1; i >= 0; i--) {\n        parent.remove(parent.children[i]);\n    }\n    this.scene.remove(this.object);\n\n  }\n\n  animateEarth(){\n    clouds.rotation.y += -.0007;\n    //earthBall.rotation.y += -.0004;\n  }\n}\n","// Global imports -\nimport * as THREE from 'three';\nimport vars from '../vars';\n\nconst stars = [];\nconst radius = 250;\nlet sphere;\n\nexport default class Stars {\n  constructor(main) {\n    this.init(main);\n  }\n  \n  init(main) {\n\n    this.scene = main.scene;\n\n    for ( var z= -radius; z < radius; z+=10 ) {\n\n      var geometry   = new THREE.SphereGeometry(0.4, 3, 3)\n      var material = new THREE.MeshPhongMaterial( {color: 0xFFFFFF} );\n      sphere = new THREE.Mesh(geometry, material)\n\n      sphere.position.x = Math.random() * radius - (radius*.5);\n      sphere.position.y = Math.random() * radius - (radius*.5);\n\n      sphere.position.z = z;\n\n      sphere.scale.x = sphere.scale.y = 2;\n\n      this.scene.add( sphere );\n      stars.push(sphere); \n    }\n\n    //vars.loopFunctions.push([this.animate, \"ANIMATE_STARS\"]);\n  }\n\n  animate(){\n        \n        \n    for(var i=0; i<stars.length; i++) {\n\t\t\t\n      const star = stars[i]; \n      star.position.z +=  i/10;\n\t\t\t\t\n      if(star.position.z>radius) star.position.z-=radius*2; \n\t\t\t\n    }\n        \n    //sphere.rotation.y += 1;\n  }\n}\n","import * as THREE from 'three';\n\n// USe this class as a helper to set up some default materials\nexport default class Material {\n  constructor(color) {\n    this.basic = new THREE.MeshBasicMaterial({\n      color,\n      side: THREE.DoubleSide\n    });\n\n    this.standard = new THREE.MeshStandardMaterial({\n      color,\n      flatShading: true,\n      roughness: 1,\n      metalness: 0,\n      side: THREE.DoubleSide\n    });\n\n    this.wire = new THREE.MeshBasicMaterial({color, wireframe: true});\n  }\n}\n\n","// Global imports -\nimport * as THREE from 'three';\nimport Material from '../components/material';\n\nexport default class RectLight {\n  constructor(main, config) {\n    this.init(main, config);\n  }\n  \n  init(main, config) {\n\n    this.scene = main;\n    this.object = new THREE.Object3D();\n    this.lightBox = new THREE.Object3D();\n\n    var width = config.width;\n    var height = config.height;\n    var intensity = config.intensity;\n    var rectLight = new THREE.RectAreaLight(0xfff4d4, intensity, width, height);\n\n    this.lightBox.add(rectLight);\n\n    var rectLightMesh = new THREE.Mesh(new THREE.PlaneBufferGeometry(), new THREE.MeshBasicMaterial({ side: THREE.BackSide, color: 0xfffaed }));\n    rectLightMesh.scale.x = rectLight.width;\n    rectLightMesh.scale.y = rectLight.height;\n    rectLight.add(rectLightMesh);\n\n    var rectLightMeshBack = new THREE.Mesh(new THREE.PlaneBufferGeometry(), new THREE.MeshBasicMaterial({ color: 0xfffaed, side: THREE.FrontSide }));\n    rectLightMesh.add(rectLightMeshBack);\n\n    var rectBox = new THREE.Mesh(\n      new THREE.BoxGeometry(rectLight.width, rectLight.height, (rectLight.height+rectLight.width)*.05),\n      new Material(\"#DCDFE3\").standard\n    )\n        \n    rectBox.position.z = (rectLight.height+rectLight.width)*.05 * .5 + 0.1;\n\n    this.lightBox.add(rectBox);\n    this.object.add(this.lightBox);\n\n    this.scene.add(this.object);\n        \n    //vars.loopFunctions.push([this.animate, \"ANIMATE_EARTH\"]);\n  }\n\n  place(position, rotation) {\n    this.object.position.set(...position);\n    this.object.rotation.set(...rotation);\n  }\n\n  animate(){\n    // animate\n  }\n\n}\n","// Global imports -\nimport * as THREE from 'three';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport SimplexNoise from 'simplex-noise';\n\nimport Material from '../components/material';\nimport RectLight from './rectLight';\n\nimport fx from '../fx';\nimport vars from '../vars';\nimport { BufferGeometryUtils } from '../../utils/bufferGeometryUtils';\n\nlet lights;\n\nlet variants = {\n    platform:[\n        {t:25, b:30, h:8, s:64},\n        {t:25, b:30, h:8, s:5},\n        {t:30, b:20, h:8, s:4},\n        {t:30, b:20, h:8, s:8},\n        {t:25, b:30, h:8, s:4},\n    ],\n    light:[\n        {w:5, h:15, c:3},\n        {w:1, h:15, c:6},\n        {w:6, h:12, c:2},\n        {w:8, h:10, c:4},\n        {w:5, h:10, c:3},\n    ]\n}\n\nlet flies = new THREE.Object3D();\n\nlet platformConfig, lightConfig;\nconst simplex = new SimplexNoise();\nvar mixer;\n\nconst modelHolderObject = new THREE.Object3D();\nconst object = new THREE.Object3D();\n\nexport default class Platform {\n    constructor(main) {\n\n        this.lights;\n    }\n  \n    init() {\n\n        const _this = this;\n\n        this.scene = vars.main.scene2;\n        lights = new THREE.Object3D();\n\n        modelHolderObject.position.y = -10;\n        object.add(modelHolderObject);\n\n        platformConfig = variants.platform[Math.floor(variants.platform.length * Math.random())];\n        lightConfig = variants.light[Math.floor(variants.light.length * Math.random())];\n\n        var geometry = new THREE.CylinderGeometry(platformConfig.t, platformConfig.b, platformConfig.h, platformConfig.s);\n        var plane = new THREE.Mesh(\n            geometry,\n            new Material(\"#5AA9DD\").standard\n        );\n        //object.add(plane);\n        //this.scene.add(this.object);\n        //this.scene.add(lights);\n\n        var landGeometry = new THREE.PlaneGeometry(1600, 1600, 20, 32, 32);\n            landGeometry.setAttribute(\"basePosition\", new THREE.BufferAttribute().copy(landGeometry.attributes.position));\n        var landMaterial = new Material('#076CAE').standard;\n        this.land = new THREE.Mesh(landGeometry, landMaterial);\n        this.land.rotation.set(90 * THREE.Math.DEG2RAD, 0, 0);\n        this.land.position.y = -10;\n\n        const basePositionAttribute = this.land.geometry.getAttribute(\"basePosition\");\n        const positionAttribute = this.land.geometry.getAttribute( 'position' );\n        const vertex = new THREE.Vector3();\n\n        for ( let vertexIndex = 0; vertexIndex < positionAttribute.count; vertexIndex++ ) {\n\n            vertex.fromBufferAttribute( basePositionAttribute, vertexIndex );\n\n            //console.log('before', vertex.x);\n\n            var perlin = simplex.noise3D(\n                vertex.x * 0.06 + 1 * 0.002,\n                vertex.y * 0.06 + 1 * 0.003,\n                vertex.z * 0.06 + 1 * 0.005\n            );\n\n            //var ratio = perlin * 0.4 * ( mouse.y + 0.1 ) + 0.8;\n            var ratio = perlin * 0.4 * 0.1 + 0.8;\n            //var ratio = perlin;\n            vertex.multiplyScalar( ratio );\n\n            //console.log('after', vertex.x, ratio);\n\n            positionAttribute.setXYZ(vertexIndex, vertex.x, vertex.y, vertex.z);\n\n        }\n\n        this.land.geometry.attributes.position.needsUpdate = true; // required after the first render\n        this.land.geometry.computeBoundingSphere();\n\n        object.add(this.land);\n\n        this.addGrass();\n        //this.addLights(lights);\n        this.addFireflies();\n        this.addModel();\n        //this.addObject(main);\n\n        if(!vars.mobile) object.position.set(-10, -5, 0);\n\n        this.scene.add(object);\n\n        vars.platformIsInitialized = true;\n    }\n\n    dispose(){\n        fx.removeFromLoop(\"ANIMATE_MODEL\");\n        fx.removeFromLoop(\"ANIMATE_FLIES\");\n        \n        this.removeModel();\n\n        for (var j = flies.children.length - 1; j >= 0; j--) {\n            flies.remove(flies.children[j]);\n        }\n\n        vars.platformIsInitialized = false;\n    }\n\n    removeModel(){\n        fx.removeFromLoop(\"ANIMATE_MODEL\");\n        fx.removeFromLoop(\"ANIMATE_FLIES\");\n\n        var parent = modelHolderObject;\n        \n        for (var i = parent.children.length - 1; i >= 0; i--) {\n            parent.remove(parent.children[i]);\n        }\n    }\n\n    addModel(){\n\n        let milestone = vars.currentMilestone;\n\n        const _this = this;\n        \n        const loader = new GLTFLoader().setPath( './assets/models/' );\n\n        //const marble = new THREE.TextureLoader().load( '/assets/textures/marble.jpg' );\n        \n        loader.load(\n            milestone.model,\n            function ( gltf ) {\n\n                var model = gltf.scene;\n                model.traverse((o) => {\n                    if (o.isMesh) o.material = new THREE.MeshPhysicalMaterial({\n                        color:0xFFFFFF,\n                        //map:marble,\n                        roughness:.98,\n                        metalness: .5,\n                    });\n                  });\n\n                gltf.scene.scale.set(1.3, 1.3, 1.3);\n                gltf.scene.position.set(0, 0, 0);\n\n\t\t\t\tmodelHolderObject.add( gltf.scene );\n\n                mixer = new THREE.AnimationMixer( gltf.scene );\n        \n                gltf.animations.forEach( ( clip ) => {\n                    mixer.clipAction( clip ).play();\n                });\n\n                vars.loopFunctions.push([_this.animateModel, \"ANIMATE_MODEL\", 1]);\n                vars.loopFunctions.push([_this.animateFlies, \"ANIMATE_FLIES\", 1]);\n\t\t\t\t\t\t\n            });\n    }\n\n    animateModel(time, delta){\n        if ( mixer ) mixer.update( delta );\n    }\n\n    addFireflies(scene){\n\n        const sphere = new THREE.SphereGeometry( 0.1, 3, 3 );\n\n        //lights\n        let light1 = new THREE.PointLight( 0x9145B6, 2, 30 );\n        light1.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0x9145B6 } ) ) );\n        flies.add( light1 );\n\n        let light2 = new THREE.PointLight( 0x0040ff, 2, 30 );\n        light2.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0x0040ff } ) ) );\n        flies.add( light2 );\n\n        let light3 = new THREE.PointLight( 0x80ff80, 2, 30 );\n        light3.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0x80ff80 } ) ) );\n        flies.add( light3 );\n\n        let light4 = new THREE.PointLight( 0xffaa00, 2, 30 );\n        light4.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0xffaa00 } ) ) );\n        flies.add( light4 );\n\n        flies.position.y = 15;\n\n        object.add( flies );\n\n        this.animateFlies(1);\n        //vars.loopFunctions.push([this.animateFlies, \"ANIMATE_FLIES\", 1]);\n    }\n\n    animateFlies(time){\n        \n        time = time * 0.0005;\n        \n        let light1 = flies.children[0];\n        let light2 = flies.children[1];\n        let light3 = flies.children[2];\n        let light4 = flies.children[3];\n\n        let radius = 20;\n\n        light1.position.x = Math.sin( time * 0.7 ) * radius;\n        light1.position.y = Math.cos( time * 0.5 ) * radius;\n        light1.position.z = Math.cos( time * 0.3 ) * radius;\n\n        light2.position.x = Math.cos( time * 0.3 ) * radius;\n        light2.position.y = Math.sin( time * 0.5 ) * radius;\n        light2.position.z = Math.sin( time * 0.7 ) * radius;\n\n        light3.position.x = Math.sin( time * 0.7 ) * radius;\n        light3.position.y = Math.cos( time * 0.3 ) * radius;\n        light3.position.z = Math.sin( time * 0.5 ) * radius;\n\n        light4.position.x = Math.sin( time * 0.3 ) * radius;\n        light4.position.y = Math.cos( time * 0.7 ) * radius;\n        light4.position.z = Math.sin( time * 0.5 ) * radius;\n    }\n\n    addGrass(scene){\n\n        const matrix = new THREE.Matrix4();\n\n        const radius = 30;\n        const gap = 5;\n\n        let mergedGeometry = new THREE.BufferGeometry();\n        let saplingGeometry = new THREE.CylinderBufferGeometry(.5,.5,6,3);\n        \n        \n        let grassMaterial = new THREE.ShaderMaterial({\n            uniforms: {\n                color2: {\n                  value: new THREE.Color(\"#193498\")\n                },\n                color1: {\n                  value: new THREE.Color(\"#B958A5\")\n                }\n              },\n              vertexShader: `\n                varying vec2 vUv;\n            \n                void main() {\n                  vUv = uv;\n                  gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n                }\n              `,\n              fragmentShader: `\n                uniform vec3 color1;\n                uniform vec3 color2;\n              \n                varying vec2 vUv;\n                \n                void main() {\n                  \n                  gl_FragColor = vec4(mix(color1, color2, vUv.y), 1.0);\n                }\n              `\n        });\n        \n        //let grassMaterial = new Material(\"#B958A5\").standard;\n\n        const geometries = [];\n\n        for(var i=0; i<Math.pow(radius, 2); i++){\n\n            let row = Math.floor( i / radius );\n\n            var perlin = simplex.noise2D( i - row * radius * 0.000000001, row * 0.000000001 );\n\n            var ratio = perlin * 2;\n\n            matrix.makeTranslation((i - row * radius) * gap, -ratio, row * gap);\n\n            /*\n            matrix.makeTranslation(\n                radius * Math.random() - radius * .5,\n                0,\n                radius * Math.random() - radius * .5,\n            )\n            */\n\n            if(fx.isPointInsideCircle(radius * gap * .5, radius * gap * .5, radius * gap * .5, (i - row * radius) * gap, row * gap)\n            && !fx.isPointInsideCircle(radius * gap * .5, radius * gap * .5, 35, (i - row * radius) * gap, row * gap)\n            )\n                geometries.push(saplingGeometry.clone().applyMatrix4(matrix));\n            \n        }\n\n        mergedGeometry = BufferGeometryUtils.mergeBufferGeometries(geometries);\n\n        let grass = new THREE.Mesh(mergedGeometry, grassMaterial);\n            grass.position.set(-radius * gap * .5, -12, -radius * gap * .5);\n\n        object.add(grass);\n\n    }\n\n    addLights(main){\n        let segment = 360/lightConfig.c;\n        let radius = platformConfig.t;\n\n        for(var i=0; i<lightConfig.c; ++i){\n\n            let alpha = segment * THREE.MathUtils.DEG2RAD * i;\n            let random = Math.random();\n\n            //console.log(segment, alpha, THREE.MathUtils.DEG2RAD, Math.PI / 180);\n\n            var light = new RectLight(main, {width:lightConfig.w, height:lightConfig.h, intensity:8});\n                light.place(\n                    [Math.cos(alpha) * radius, random * 0 + 15, Math.sin(alpha) * radius], \n                    [ 0, (-segment*i + 90) * THREE.MathUtils.DEG2RAD, 0]\n                );\n\n                light.lightBox.rotation.x = ( -15 - ( random * 0) ) * THREE.MathUtils.DEG2RAD;\n\n        }\n\n    }\n  }\n","import anime from \"animejs\";\n\nimport vars from \"./vars\";\nimport Events from \"./events\";\n\nvar events = new Events();\nvar curtain = null;\n\nexport default class Overlay {\n  constructor() {\n    this.container = document.getElementById('overlay');\n\n    this.initText(document);\n    this.initGlobe();\n  }\n\n  initText(ID){\n    var textWrappers = ID.querySelectorAll(\".off\");\n    for(var i=0; i<textWrappers.length; ++i){\n      const text = textWrappers[i];\n\n      text.setAttribute(\"data-count\", text.textContent.split(' ').length);\n\n      if(!text.classList.contains(\"made\")){\n        if(text.classList.contains(\"anim-letters\")){\n          text.innerHTML = \"<span class='word'>\" + text.textContent.replaceAll(\" \", \"</span> <span class='word'>\") + \"</span>\";\n          const words = text.querySelectorAll(\"span.word\");\n          for(var k=0; k<words.length; ++k){\n            words[k].innerHTML = words[k].textContent.replace(/\\S/g, \"<span class='letter'><span>$&</span></span>\");\n          }\n        }\n        else if(text.classList.contains(\"anim-words\")){\n          //text.innerHTML = \"<span class='letter'><span>\" + text.textContent.replaceAll(\" \", \"</span></span> <span class='letter'><span>\") + \"</span></span>\";\n          let arr = text.textContent.split(\" \");\n          arr = arr.map(n=>n.replaceAll('<$', '<i>').replaceAll('$>', '</i>'));\n          text.innerHTML = '<span class=\"letter\"><span>' + arr.join(\"</span></span> <span class='letter'><span>\") + \"</span></span>\";\n        }\n      }\n    }\n  }\n\n  initGlobe(){\n    const ul = document.querySelector(\"ul.milestones\");\n    for(var i=0; i<vars.milestones.length; ++i){\n      const li = document.createElement(\"li\");\n      const an = document.createElement(\"a\");\n      an.setAttribute(\"href\", \"javascript:void(0);\");\n      an.id = i;\n      an.addEventListener('click', (e)=>{ events.milestoneClickHandler(e); }, false);\n      an.addEventListener('mouseenter', (e)=>{ events.buttonHoverHandler(e); }, false);\n      an.innerHTML = '<svg width=\"100\" height=\"100\"><defs><linearGradient id=\"gradient\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\"><stop offset=\"0%\" stop-color=\"#B3DBF5\"></stop><stop offset=\"10%\" stop-color=\"#38B0FF\"></stop><stop offset=\"100%\" stop-color=\"transparent\"></stop></linearGradient></defs><circle cx=\"50\" cy=\"50\" r=\"49\" stroke=\"url(#gradient)\" stroke-width=\"1\" fill=\"none\"></circle></svg><span>'+vars.milestones[i].city+'<i>'+vars.milestones[i].year+'</i></span>';\n      li.appendChild(an);\n      ul.appendChild(li);\n    }\n  }\n\n  initStatue(){\n    const milestone = vars.currentMilestone;\n\n    const container = document.querySelector(\".statue\");\n    container.querySelector(\".where\").innerHTML = milestone.city;\n    container.querySelector(\".when\").innerHTML = milestone.year;\n    container.querySelector(\"h3\").innerHTML =  milestone.title;\n    container.querySelector(\"p\").innerHTML = milestone.description;\n    container.querySelector(\"audio\").setAttribute(\"data-time\", milestone.time);\n    container.querySelector(\"audio\").setAttribute(\"src\", \"/assets/audios/\" + milestone.sound);\n\n    this.initText(container);\n  }\n\n  startGlobe(){\n    const inside = document.querySelector(\".globe .inside\");\n    const texts = document.querySelectorAll(\".globe .off span.letter span\");\n    const svg = document.querySelectorAll(\".globe .inside svg\");\n    const stones = document.querySelectorAll(\".globe .milestones li\");\n\n    const stoneAnimArray = vars.mobile ? [0, -5, 5, 0] : [0, -10, 10, 0];\n\n    anime.timeline({loop:false})\n      .add({\n        targets: texts,\n        translateY: [0, '100%'],\n        easing: \"easeInCubic\",\n        duration: 555,\n        delay: (el, i) => 55 * i,\n        complete: () => inside.classList.add(\"hide\")\n      }).add({\n        targets: svg,\n        opacity: 0,\n        translateY: [0, 30],\n        duration: 555,\n        easing: \"easeInCubic\",\n            \n      }, 0).add({\n        targets: stones,\n        translateY: stoneAnimArray,\n        easing: \"easeInOutSine\",\n        duration: 777,\n        delay: (el, i) => 55 * i\n      });\n  }\n\n  initCurtain(milestone){\n    curtain = document.querySelector(\".curtain\");\n    curtain.classList.remove(\"hide\");\n\n    let focused = document.querySelector(\".milestones li.focused\");\n    if(focused){\n      focused.classList.remove(\"focused\");\n    }\n\n    const ms = document.querySelector(\".milestones li:nth-child(\"+(milestone.id+1)+\")\");\n    ms.classList.add(\"visited\", \"focused\");\n        \n    const h2 = document.querySelector(\".curtain h2\");\n    const bubble = document.querySelector(\".yearBubble span\");\n    h2.innerText = milestone.city;\n    const _h = h2.getBoundingClientRect().height;\n    const text = milestone.city;\n\n    h2.innerHTML = \"\";\n    bubble.innerHTML = milestone.year;\n\n    for (var i = 0; i < 6; ++i) {\n      const div = document.createElement(\"div\");\n      const ratio = (10 - i * 1.2) / 10;\n      div.style.cssText = \"height:\" + (_h * ratio) + \"px; \" + (i == 1 ? \" color:#DCDFE3;\" : \"\");\n      div.innerHTML = \"<span>\" + text + \"</span>\";\n\n      h2.appendChild(div);\n    }\n  }\n\n  animateCurtain(DIRECTION, callback){\n    if(DIRECTION == \"IN\"){\n      curtain.classList.add(\"in\");\n      anime.timeline().add({\n        targets: '.curtain h2 span',\n        translateY: [\"100%\", 0],\n        easing: \"easeOutExpo\",\n        duration: (el, i) => 950 + 150 * i,\n        delay: (el, i) => 66 * i\n      }).add({\n        targets: '.curtain .yearBubble',\n        translateY: [1000, 0],\n        rotate: [\"-90deg\", 0],\n        easing: \"easeOutCubic\",\n        duration: 999,\n      }, 0);\n    }else{\n      anime.timeline().add({\n        targets: '.curtain .yearBubble',\n        translateY: [0, -1000],\n        rotate: [0, \"90deg\"],\n        easing: \"easeInCubic\",\n        duration: 999,\n      }).add({\n        targets: '.curtain h2 span',\n        translateY: [0, \"-120%\"],\n        easing: \"easeInCubic\",\n        duration: (el, i) => 1150 - 160 * i,\n        complete:()=>{\n          curtain.classList.remove(\"in\");\n          if(callback) callback();\n        }\n      })\n    }\n  }\n\n  animateGlobe(section){\n    const _this = this;\n    _this.animate(section);\n    const svg = document.querySelectorAll(\".globe .inside svg\");\n    const stones = document.querySelectorAll(\".globe .milestones li\");\n    anime.timeline().add({\n        targets: stones,\n        translateY: [-70, 0],\n        opacity: [0, 1],\n        easing: \"easeInOutCubic\",\n        duration: 999,\n        delay: (el, i) => 55 * i,\n      }).add({\n          targets: svg,\n          opacity: [0, 1],\n          duration: 999,\n          delay: 555,\n      }, 0);\n  }\n\n  animateAbout(){\n    const about = document.querySelector(\"section.about\");\n    const intro = document.querySelector(\"section.intro\");\n    const ps = document.querySelectorAll(\"section.about p\");\n    const btn = document.querySelectorAll(\"section.about button\");\n\n    about.classList.remove(\"hide\");\n\n    anime.timeline().add({\n      targets: ps,\n      translateY: [60, 0],\n      scaleY: [1.2, 1],\n      opacity: [0, 1],\n      easing: \"easeOutCubic\",\n      duration: 999,\n      delay: (el, i) => 99 * i\n    }).add({\n      targets:btn,\n      opacity: [0, 1],\n      duration: 555\n    });\n  }\n\n  animateAboutClose(){\n    const about = document.querySelector(\"section.about\");\n    const intro = document.querySelector(\"section.intro\");\n    const ps = document.querySelectorAll(\"section.about p\");\n    const btn = document.querySelectorAll(\"section.about button\");\n    \n    about.classList.add(\"hide\");\n  }\n\n  animate(section){\n    const texts = section.querySelectorAll(\".off\");\n\n    for(var i=0; i<texts.length; ++i){\n      texts[i].style.opacity = 1;\n      anime.timeline({loop:false})\n        .add({\n          targets: texts[i].querySelectorAll(\".letter span\"),\n          translateY: ['100%',0],\n          easing: \"easeOutExpo\",\n          duration: 999,\n          delay: (el, i) => 99 * i\n        }).add({\n          targets: texts[i],\n          translateY: ['40%', 0],\n          //scale:[1.2, 1],\n          easing: \"easeOutCubic\",\n          duration: 2222,\n        }, 0);\n    }\n  }\n\n}\n","import * as THREE from 'three';\nimport anime from \"animejs\";\n\nimport Overlay from './overlay';\n\nimport Config from \"../data/config\";\nimport vars from \"./vars\";\nimport fx from \"./fx\";\n\nconst color = {r:Config.colors.night.r, g:Config.colors.night.g, b:Config.colors.night.b};\nlet sections, section;\n\nexport default class Timeline {\n  constructor(main) {\n\n    const _this = this;\n    sections = document.querySelectorAll('main section');\n\n    // init the overlay\n    this.overlay = new Overlay();\n    vars.overlay = this.overlay;\n\n    // animate stars\n    vars.loopFunctions.push([main.stars.animate, \"ANIMATE_STARS\", 0]);\n        \n    this.goto = {\n      preloader: (callback) => {\n\n        //console.log('[ timeline : preloader ]');\n        this.fixSections([0]);\n\n        anime({\n          targets: color,\n          r: Config.colors.day.r,\n          g: Config.colors.day.g,\n          b: Config.colors.day.b,\n          duration: 1000,\n          delay:10,\n          easing: 'linear',\n          update: function(){\n            const c = \"rgb(\"+Math.floor(color.r)+\", \"+Math.floor(color.g)+\", \"+Math.floor(color.b)+\")\";\n            main.scene.fog = new THREE.FogExp2(c, Config.fog.near);\n            main.scene.background = new THREE.Color(c);\n          },\n          complete:function(){\n                        \n            section.classList.add(\"play\");\n            \n            setTimeout(() => {\n                section.classList.add(\"full\");\n            }, 1444);\n\n            setTimeout(() => {\n                section.classList.add(\"done\");\n                setTimeout(() => { \n                  \n                  _this.goto.intro();\n\n                  anime.timeline()\n                    .add({\n                        targets: main.earth.object.position,\n                        z: 0,\n                        duration:3000,\n                        delay: 555,\n                        easing:\"easeInOutQuad\",\n                        complete:()=>{\n                            fx.removeFromLoop(\"ANIMATE_STARS\");\n                        }\n                    }).add({\n                        targets: main.earth.object.rotation,\n                        y: 0,\n                        duration:4000,\n                        easing: \"easeInOutQuad\",\n                        complete:()=>{\n                            vars.isMouseActive = true;\n                        }\n                    }, 0);\n\n\n                }, 1333);\n            }, 3000);\n          }\n        });\n\n      },\n      intro: (callback) => {\n\n        //console.log('[ timeline : intro ]');\n        this.fixSections([1]);\n        this.overlay.animate(section);\n\n        //vars.main.globe.addMarkers();\n\n        setTimeout(() => {\n            //vars.main.globe.showMarkers();\n\n            //vars.main.earth.animateCut();\n            vars.main.addGlobe();\n            \n            anime({\n                targets: vars.localPlanes,\n                constant: 0,\n                duration: 2222,\n                easing: \"easeInOutExpo\",\n                delay:111,\n                complete:()=>{\n                    vars.isCutActive = true;\n                }\n            });\n\n        }, 3333);\n                \n      },\n      globe: (callback) => {\n        //console.log('[ timeline : globe ]');\n        this.fixSections([2]);\n        this.overlay.animateGlobe(section);\n\n        document.body.classList.add(\"ready\");\n\n        setTimeout(() => {\n            this.overlay.startGlobe();\n        }, 5555);\n\n        anime({\n            targets: color,\n            r: Config.colors.globe.r,\n            g: Config.colors.globe.g,\n            b: Config.colors.globe.b,\n            duration: 1000,\n            easing: 'linear',\n            update: function(){\n              const c = \"rgb(\"+Math.floor(color.r)+\", \"+Math.floor(color.g)+\", \"+Math.floor(color.b)+\")\";\n              main.scene.fog = new THREE.FogExp2(c, Config.fog.near);\n              main.scene.background = new THREE.Color(c);\n            },\n        });\n        //vars.isPaused = true;\n        //fx.removeFromLoop(\"ANIMATE_STARS\");\n      },\n      curtain: (n, callback) => {\n        //console.log('[ timeline : transition curtain ]');\n        this.fixSections([3]);\n        this.overlay.animateCurtain(\"IN\");\n        document.body.classList.remove(\"hold\");\n        document.body.classList.add(\"statue\");\n      },\n      section: (n, callback) => {\n        //console.log('[ timeline : section'+n+' ]');\n        this.fixSections([2, 4]);\n        document.querySelector(\".statue .inside\").scrollTo(0,0);\n        this.overlay.animate(section);\n        document.body.classList.add(\"statue\");\n      },\n      about: (n, callback) => {\n        //console.log('[ timeline : section'+n+' ]');\n        this.fixSections([5]);\n        this.overlay.animate(section);\n      }\n    };\n\n    const getTextures = ()=> new Promise((resolve, reject)=>{\n      const loader = new THREE.TextureLoader();\n      THREE.DefaultLoadingManager.onProgress = (url, loaded, total) => {\n        //console.log(url, loaded, total);\n      }\n      THREE.DefaultLoadingManager.onLoad = ()=>resolve(textures);\n      const textures = [\n        vars.path.textures + 'map2.jpg',\n        vars.path.textures + 'elevation2.jpg',\n        vars.path.textures + 'water.png',\n        vars.path.textures + 'clouds.png'\n      ].map(filename=>loader.load(filename));\n    });\n          \n    getTextures().then(result=>{\n      vars.textures = result;\n      //console.log(\"We received,\", result);\n      setTimeout(() => { \n        main.addEarth();\n        _this.goto.preloader();\n        //vars.main.flipScene(1);\n        //vars.main.initPlatform();\n      }, 333);\n    });\n\n  }\n\n  fixSections(n){\n    for(var i=0; i<sections.length; ++i){\n      if(n.includes(i)){\n        sections[i].classList.remove(\"hide\");\n        section = sections[i];\n      }else{\n        sections[i].classList.add(\"hide\");\n      }\n    }\n    document.body.classList.remove(\"statue\");\n  }\n}\n","// Global imports -\nimport * as THREE from 'three';\nimport anime from 'animejs';\n\n// Local imports -\n// Components\nimport Renderer from './components/renderer';\nimport Camera from './components/camera';\nimport Light from './components/light';\nimport Controls from './components/controls';\n\n//Other\nimport Events from './events';\nimport vars from './vars';\nimport fx from './fx';\n\n//Elements\nimport Globe from './elements/globe';\nimport Earth from './elements/earth';\nimport Stars from './elements/stars';\nimport Platform from './elements/platform';\nimport Timeline from './timeline';\n\n// data\nimport Config from './../data/config';\n// -- End of imports\n\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader.js';\nimport { FilmGrainShader } from './helpers/FilmGrainShader.js';\nimport { LensDistortionShader } from './helpers/LensDistortionShader.js';\n\nvar composer, composer2, renderPass, renderPass2, distortPass, grainPass, fxaaPass, bloomPass, bokehPass;\n\nvar params = {\n  enableNoise: true,\n  noiseSpeed: 0.1,\n  noiseIntensity: 0.0,\n\n  enableDistortion: true,\n  baseIor: 1.0,\n  bandOffset: 0.0,\n  jitterIntensity: 1.0,\n  samples: 7,\n\n  exposure: .01,\n  bloomStrength: .05,\n  bloomThreshold: 0.1,\n  bloomRadius: 0.1,\n};\n\nvar activeScene = 0, scenes = [], composers = [];\n\nexport default class Main {\n  constructor(container) {\n\n    vars.main = this;\n    vars.mobile = fx.isMobile();\n\n    if(vars.mobile){\n      Config.camera.posZ = 450;\n      Config.globeCamera.posZ = 540;\n      Config.platformCamera.posZ = 120;\n      Config.fog.near = 0.0014;\n    }\n    \n    this.container = container;\n\n    // Start Three clock\n    this.clock = new THREE.Clock();\n\n    let startColor = \"rgb(\"+Config.colors.night.r+\", \"+Config.colors.night.g+\", \"+Config.colors.night.b+\")\";\n\n    // Main scene creation\n    this.scene = new THREE.Scene();\n    this.scene.fog = new THREE.FogExp2(startColor, Config.fog.near);\n    scenes.push(this.scene);\n\n    // Main scene creation\n    this.scene2 = new THREE.Scene();\n    this.scene2.fog = new THREE.FogExp2(Config.fog2.color, Config.fog2.near);\n    scenes.push(this.scene2);\n\n    // Get Device Pixel Ratio first for retina\n    if(window.devicePixelRatio) {\n      Config.dpr = window.devicePixelRatio;\n    }\n\n    // Main renderer constructor\n    this.renderer = new Renderer(this.scene, container);\n\n    // Components instantiations\n    this.camera = new Camera(this.renderer.threeRenderer);\n    this.controls = new Controls(this.camera.threeCamera, container);\n    this.controls.threeControls.enabled = false;\n    this.light = new Light(this.scene);\n    this.light2 = new Light(this.scene2);\n\n    // Render Pass Setup\n    renderPass = new RenderPass( this.scene, this.camera.threeCamera );\n    renderPass2 = new RenderPass( this.scene2, this.camera.threeCamera );\n    grainPass = new ShaderPass( FilmGrainShader );\n    fxaaPass = new ShaderPass( FXAAShader );\n    distortPass = new ShaderPass( LensDistortionShader );\n    \n    //grainPass.material.uniforms.intensity.value = 0.05;\n    distortPass.material.defines.CHROMA_SAMPLES = 7;\n    distortPass.material.uniforms.jitterIntensity.value = params.jitterIntensity;\n\n    composer = new EffectComposer( this.renderer.threeRenderer );\n    composer.setSize( window.innerWidth, window.innerHeight );\n    composer.setPixelRatio( window.devicePixelRatio );\n    composer.addPass( renderPass );\n    composer.addPass( fxaaPass );\n    composer.addPass( distortPass );\n    composer.addPass( grainPass );\n    \n    composers.push(composer);\n\n    composer2 = new EffectComposer( this.renderer.threeRenderer );\n    composer2.setSize( window.innerWidth, window.innerHeight );\n    composer2.setPixelRatio( window.devicePixelRatio );\n    composer2.addPass( renderPass2 );\n    composer2.addPass( fxaaPass );\n    composer2.addPass( distortPass );\n    composer2.addPass( grainPass );\n\n    composers.push(composer2);\n\n\n    // Create and place lights in scene\n    const lights = ['ambient', 'directional', 'point', 'hemi'];\n    lights.forEach((light) => this.light.place(light));\n    \n    const lights2 = ['hemi', 'point', 'directional', 'ambient'];\n    lights2.forEach((light) => this.light2.place(light));\n\n\n    //this.globe = new Globe(this);\n    //this.earth = new Earth(this);\n    this.stars = new Stars(this);\n    this.platform = new Platform(this);\n\n    this.camera.threeCamera.position.set(0, 0, Config.camera.posZ);\n    //this.camera.threeCamera.rotation.set(-30 * THREE.Math.DEG2RAD, 0, 0);\n    \n    //this.overlay = new Overlay();\n    this.timeline = new Timeline(this);\n\n    this.events = new Events(this);\n    this.events.init(this);\n\n    this.render();\n  }\n\n  addGlobe(){\n    this.globe = new Globe(this);\n  }\n\n  addEarth(){\n    this.earth = new Earth(this);\n  }\n\n  warp(DIRECTION, callback){\n\n    const wrapDuration = 2000;\n    const easingIn = 'easeInQuad';\n\n    if(DIRECTION == \"IN\"){\n      anime({\n        targets: params,\n        baseIor: [1.0, 0.5], bandOffset: [0.0, 0.05],\n        easing: easingIn,\n        duration: wrapDuration,\n        complete: ()=>{ if(callback) callback(); }\n      });\n    }else if(DIRECTION == \"OUT\"){\n      anime({\n        targets: params,\n        baseIor: [1.4, 1.0], bandOffset: [0.08, 0.0],\n        easing: \"easeOutCubic\",\n        duration: wrapDuration,\n        complete: ()=>{ if(callback) callback(); },\n      });\n    }else if(DIRECTION == \"RIN\"){\n      anime({\n        targets: params,\n        baseIor: [1.0, 1.4], bandOffset: [0.0, 0.08],\n        easing: \"easeInCubic\",\n        duration: wrapDuration * .5,\n        complete: ()=>{ if(callback) callback(); }\n      });\n    }else if(DIRECTION == \"ROUT\"){\n      anime({\n        targets: params,\n        baseIor: [0.5, 1.0], bandOffset: [0.05, 0.0],\n        easing: \"easeInCubic\",\n        duration: wrapDuration * .5,\n        complete: ()=>{ if(callback) callback(); }\n      });\n    }\n  }\n\n  flipScene(K){\n    activeScene = K;\n    if( activeScene == 0 ){\n      this.renderer.threeRenderer.setClearColor(Config.fog.color);\n      this.controls.threeControls.enabled = true;\n    }else{\n      this.controls.threeControls.enabled = false;\n      this.renderer.threeRenderer.setClearColor(Config.fog2.color);\n    }\n  }\n\n  initPlatform(){\n    this.camera.threeCamera.position.set(Config.platformCamera.posX, Config.platformCamera.posY, Config.platformCamera.posZ);\n    this.camera.threeCamera.lookAt(0,0,0);\n    this.platform.init();\n    vars.platformIsInitialized = true;\n  }\n\n  resetPlatform(){\n    this.platform.removeModel();\n  }\n\n  disposePlatform(){\n    this.platform.dispose();\n  }\n\n  render() {\n\n    // Call render function and pass in created scene and camera\n    //this.renderer.render(this.scene, this.camera.threeCamera);\n\n    distortPass.material.uniforms.baseIor.value = params.baseIor;\n    distortPass.material.uniforms.bandOffset.value = params.bandOffset;\n    \n   composers[activeScene].render();\n    \n    const delta = this.clock.getDelta();\n\n    // loop functions\n    if(!vars.isPauseLoopFunctions){\n      var time = Date.now();\n      for (var i in vars.loopFunctions){\n        if( vars.loopFunctions[i][2] == activeScene ) vars.loopFunctions[i][0](time, delta);\n      }\n    }\n    \n    if(vars.isMouseActive){\n      scenes[activeScene].rotation.y = THREE.MathUtils.lerp(scenes[activeScene].rotation.y, (vars.mouseCoords.x * Math.PI) / 10, 0.05);\n      scenes[activeScene].rotation.x = THREE.MathUtils.lerp(scenes[activeScene].rotation.x, (vars.mouseCoords.y * Math.PI) / 10, 0.05);\n    }\n\n    if(vars.isCutActive){\n      let vec = ((.5 - vars.mouseCoords.x) * 100) - vars.localPlanes[0].constant;\n      vars.localPlanes[0].constant += vec / 30;\n      vars.localPlanes[1].constant += -vec / 30;\n    }\n\n    // RAF\n    if(!vars.isPaused)\n      requestAnimationFrame(this.render.bind(this)); // Bind the main class instead of window object\n  }\n}\n","// https://www.shadertoy.com/view/4t2fRz\n\nexport const FilmGrainShader = {\n\n  uniforms: {\n\n    tDiffuse: { value: null },\n    intensity: { value: 0.075 },\n    noiseOffset: { value: 0.0 },\n\n  },\n\n  vertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t`,\n\n  fragmentShader: /* glsl */`\n\n\t\t// 0: Addition, 1: Screen, 2: Overlay, 3: Soft Light, 4: Lighten-Only\n\t\t#define BLEND_MODE 0\n\n\t\t// What gray level noise should tend to.\n\t\t#define MEAN 0.0\n\n\t\t// Controls the contrast/variance of noise.\n\t\t#define VARIANCE 0.5\n\n\t\tvarying vec2 vUv;\n\t\tuniform float intensity;\n\t\tuniform float noiseOffset;\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvec3 channel_mix( vec3 a, vec3 b, vec3 w ) {\n\n\t\t\treturn vec3(\n\t\t\t\tmix( a.r, b.r, w.r ),\n\t\t\t\tmix( a.g, b.g, w.g ),\n\t\t\t\tmix( a.b, b.b, w.b )\n\t\t\t);\n\n\t\t}\n\n\t\tfloat gaussian( float z, float u, float o ) {\n\n\t\t\treturn (\n\t\t\t\t1.0 / ( o * sqrt( 2.0 * 3.1415 ) ) ) * exp( - ( ( ( z - u ) * ( z - u ) ) / ( 2.0 * ( o * o ) ) )\n\t\t\t);\n\n\t\t}\n\n\t\tvec3 madd( vec3 a, vec3 b, float w ) {\n\n\t\t\treturn a + a * b * w;\n\n\t\t}\n\n\t\tvec3 screen( vec3 a, vec3 b, float w ) {\n\n\t\t\treturn mix(\n\t\t\t\ta,\n\t\t\t\tvec3( 1.0 ) - ( vec3( 1.0 ) - a ) * ( vec3( 1.0 ) - b ),\n\t\t\t\tw\n\t\t\t);\n\n\t\t}\n\n\t\tvec3 overlay( vec3 a, vec3 b, float w ) {\n\n\t\t\treturn mix(\n\t\t\t\ta,\n\t\t\t\tchannel_mix(\n\t\t\t\t\t2.0 * a * b,\n\t\t\t\t\tvec3( 1.0 ) - 2.0 * ( vec3( 1.0 ) - a ) * ( vec3( 1.0 ) - b ),\n\t\t\t\t\tstep( vec3( 0.5 ), a )\n\t\t\t\t),\n\t\t\t\tw\n\t\t\t);\n\n\t\t}\n\n\t\tvec3 soft_light( vec3 a, vec3 b, float w ) {\n\n\t\t\treturn mix(\n\t\t\t\ta,\n\t\t\t\tpow(\n\t\t\t\t\ta,\n\t\t\t\t\tpow( vec3( 2.0 ), 2.0 * ( vec3( 0.5 ) - b) )\n\t\t\t\t),\n\t\t\t\tw\n\t\t\t);\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 color;\n\n\t\t\tvec2 uv = vUv;\n\t\t\tcolor = texture2D( tDiffuse, uv );\n\n\t\t\tfloat t = noiseOffset;\n\t\t\tfloat seed = dot( uv, vec2( 12.9898, 78.233 ) );\n\t\t\tfloat noise = fract( sin( seed ) * 43758.5453 + t );\n\t\t\tnoise = gaussian( noise, float( MEAN ), float( VARIANCE ) * float( VARIANCE ) );\n\n\t\t\t// Ignore these mouse stuff if you're porting this\n\t\t\t// and just use an arbitrary intensity value.\n\t\t\tfloat w = intensity;\n\t\t\tvec3 grain = vec3( noise ) * ( 1.0 - color.rgb );\n\n\t\t\t// addition\n\t\t\t#if BLEND_MODE == 0\n\t\t\tcolor.rgb += grain * w;\n\n\t\t\t// screen\n\t\t\t#elif BLEND_MODE == 1\n\t\t\tcolor.rgb = screen(color.rgb, grain, w);\n\n\t\t\t// overlay\n\t\t\t#elif BLEND_MODE == 2\n\t\t\tcolor.rgb = overlay(color.rgb, grain, w);\n\n\t\t\t// soft light\n\t\t\t#elif BLEND_MODE == 3\n\t\t\tcolor.rgb = soft_light(color.rgb, grain, w);\n\n\t\t\t// lighten only\n\t\t\t#elif BLEND_MODE == 4\n\t\t\tcolor.rgb = max(color.rgb, grain * w);\n\t\t\t#endif\n\n\t\t\tgl_FragColor = color;\n\n\t\t}\n\n\t`,\n\n};\n","// https://www.shadertoy.com/view/4t2fRz\n\nexport const LensDistortionShader = {\n\n  defines: {\n\n    // 0: NONE, 1: RGB, 2: RYGCBV\n    BAND_MODE: 2,\n\n    CHROMA_SAMPLES: 1,\n\n  },\n\n  uniforms: {\n\n    tDiffuse: { value: null },\n    baseIor: { value: 0.075 },\n    bandOffset: { value: 0.003 },\n    jitterIntensity: { value: 1.0 },\n    jitterOffset: { value: 0.0 },\n\n  },\n\n  vertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 viewDir;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tviewDir = normalize( ( modelViewMatrix * vec4( position, 1.0 ) ).xyz );\n\n\t\t}\n\n\t`,\n\n  fragmentShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 viewDir;\n\t\tuniform float baseIor;\n\t\tuniform float bandOffset;\n\t\tuniform float jitterIntensity;\n\t\tuniform float jitterOffset;\n\t\tuniform sampler2D tDiffuse;\n\n\t\t#include <common>\n\t\tvoid main() {\n\n\t\t\tvec3 normal = vec3( ( 2.0 * vUv - vec2( 1.0 ) ), 1.0 );\n\t\t\tnormal.z = 1.0;\n\t\t\tnormal = normalize( normal );\n\n\t\t\tvec3 color;\n\n\t\t\t// if NO BANDS\n\t\t\t#if BAND_MODE == 0\n\n\t\t\tvec3 refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor );\n\t\t\tcolor = texture2D( tDiffuse, vUv + refracted.xy ).rgb;\n\n\t\t\t// if RGB or RYGCBV BANDS\n\t\t\t#else\n\n\t\t\tfloat index, randValue, offsetValue;\n\t\t\tfloat r, g, b, r_ior, g_ior, b_ior;\n\t\t\tvec3 r_refracted, g_refracted, b_refracted;\n\t\t\tvec4 r_sample, g_sample, b_sample;\n\n\t\t\t#if BAND_MODE == 2\n\t\t\tfloat y, c, v, y_ior, c_ior, v_ior;\n\t\t\tvec3 y_refracted, c_refracted, v_refracted;\n\t\t\tvec4 y_sample, c_sample, v_sample;\n\t\t\t#endif\n\n\t\t\tfor ( int i = 0; i < CHROMA_SAMPLES; i ++ ) {\n\n\t\t\t\tindex = float( i );\n\t\t\t\trandValue = rand( sin( index + 1. ) * gl_FragCoord.xy + vec2( jitterOffset, - jitterOffset ) ) - 0.5;\n\t\t\t\toffsetValue = index / float( CHROMA_SAMPLES ) + randValue * jitterIntensity;\n\t\t\t\t#if BAND_MODE == 1\n\t\t\t\trandValue *= 2.0;\n\t\t\t\t#endif\n\n\t\t\t\t// Paper describing functions for creating yellow, cyan, and violet bands and reforming\n\t\t\t\t// them into RGB:\n\t\t\t\t// https://web.archive.org/web/20061108181225/http://home.iitk.ac.in/~shankars/reports/dispersionraytrace.pdf\n\t\t\t\tr_ior = 1.0 + bandOffset * ( 0.0 + offsetValue );\n\t\t\t\tg_ior = 1.0 + bandOffset * ( 2.0 + offsetValue );\n\t\t\t\tb_ior = 1.0 + bandOffset * ( 4.0 + offsetValue );\n\n\t\t\t\tr_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / r_ior );\n\t\t\t\tg_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / g_ior );\n\t\t\t\tb_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / b_ior );\n\n\t\t\t\tr_sample = texture2D( tDiffuse, vUv + r_refracted.xy );\n\t\t\t\tg_sample = texture2D( tDiffuse, vUv + g_refracted.xy );\n\t\t\t\tb_sample = texture2D( tDiffuse, vUv + b_refracted.xy );\n\n\t\t\t\t#if BAND_MODE == 2\n\t\t\t\ty_ior = 1.0 + bandOffset * ( 1.0 + offsetValue );\n\t\t\t\tc_ior = 1.0 + bandOffset * ( 3.0 + offsetValue );\n\t\t\t\tv_ior = 1.0 + bandOffset * ( 5.0 + offsetValue );\n\n\t\t\t\ty_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / y_ior );\n\t\t\t\tc_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / c_ior );\n\t\t\t\tv_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / v_ior );\n\n\t\t\t\ty_sample = texture2D( tDiffuse, vUv + y_refracted.xy );\n\t\t\t\tc_sample = texture2D( tDiffuse, vUv + c_refracted.xy );\n\t\t\t\tv_sample = texture2D( tDiffuse, vUv + v_refracted.xy );\n\n\t\t\t\tr = r_sample.r / 2.0;\n\t\t\t\ty = ( 2.0 * y_sample.r + 2.0 * y_sample.g - y_sample.b ) / 6.0;\n\t\t\t\tg = g_sample.g / 2.0;\n\t\t\t\tc = ( 2.0 * c_sample.g + 2.0 * c_sample.b - c_sample.r ) / 6.0;\n\t\t\t\tb = b_sample.b / 2.0;\n\t\t\t\tv = ( 2.0 * v_sample.b + 2.0 * v_sample.r - v_sample.g ) / 6.0;\n\n\t\t\t\tcolor.r += r + ( 2.0 * v + 2.0 * y - c ) / 3.0;\n\t\t\t\tcolor.g += g + ( 2.0 * y + 2.0 * c - v ) / 3.0;\n\t\t\t\tcolor.b += b + ( 2.0 * c + 2.0 * v - y ) / 3.0;\n\t\t\t\t#else\n\t\t\t\tcolor.r += r_sample.r;\n\t\t\t\tcolor.g += g_sample.g;\n\t\t\t\tcolor.b += b_sample.b;\n\t\t\t\t#endif\n\n\t\t\t}\n\n\t\t\tcolor /= float( CHROMA_SAMPLES );\n\n\t\t\t#endif\n\n\t\t\tgl_FragColor = vec4( color, 1.0 );\n\n\t\t}\n\n\t`,\n\n};\n","import Config from './data/config';\nimport Detector from './utils/detector';\nimport Main from './app/main';\n\n// Styles\nimport './../css/app.scss';\n\n// Check environment and set the Config helper\nif(__ENV__ === 'dev') {\n  console.log('----- RUNNING IN DEV ENVIRONMENT! -----');\n\n  Config.isDev = true;\n}\n\nfunction init() {\n  // Check for webGL capabilities\n  if(!Detector.webgl) {\n    Detector.addGetWebGLMessage();\n  } else {\n    const container = document.getElementById('appContainer');\n    new Main(container);\n  }\n}\n\ninit();\n","module.exports = function (THREE) {\n  var MOUSE = THREE.MOUSE;\n  if (!MOUSE) MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\n  /**\n   * @author qiao / https://github.com/qiao\n   * @author mrdoob / http://mrdoob.com\n   * @author alteredq / http://alteredqualia.com/\n   * @author WestLangley / http://github.com/WestLangley\n   * @author erich666 / http://erichaines.com\n   */\n  /*global THREE, console */\n\n  function OrbitConstraint(object) {\n    this.object = object;\n\n    // \"target\" sets the location of focus, where the object orbits around\n    // and where it pans with respect to.\n    this.target = new THREE.Vector3();\n\n    // Limits to how far you can dolly in and out ( PerspectiveCamera only )\n    this.minDistance = 0;\n    this.maxDistance = Infinity;\n\n    // Limits to how far you can zoom in and out ( OrthographicCamera only )\n    this.minZoom = 0;\n    this.maxZoom = Infinity;\n\n    // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n    this.minPolarAngle = 0; // radians\n    this.maxPolarAngle = Math.PI; // radians\n\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n    this.minAzimuthAngle = -Infinity; // radians\n    this.maxAzimuthAngle = Infinity; // radians\n\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n    this.enableDamping = false;\n    this.dampingFactor = 0.25;\n\n    ////////////\n    // internals\n\n    var scope = this;\n\n    var EPS = 0.000001;\n\n    // Current position in spherical coordinate system.\n    var theta;\n    var phi;\n\n    // Pending changes\n    var phiDelta = 0;\n    var thetaDelta = 0;\n    var scale = 1;\n    var panOffset = new THREE.Vector3();\n    var zoomChanged = false;\n\n    // API\n\n    this.getPolarAngle = function () {\n      return phi;\n    };\n\n    this.getAzimuthalAngle = function () {\n      return theta;\n    };\n\n    this.rotateLeft = function (angle) {\n      thetaDelta -= angle;\n    };\n\n    this.rotateUp = function (angle) {\n      phiDelta -= angle;\n    };\n\n    // pass in distance in world space to move left\n    this.panLeft = (function () {\n      var v = new THREE.Vector3();\n\n      return function panLeft(distance) {\n        var te = this.object.matrix.elements;\n\n        // get X column of matrix\n        v.set(te[0], te[1], te[2]);\n        v.multiplyScalar(-distance);\n\n        panOffset.add(v);\n      };\n    })();\n\n    // pass in distance in world space to move up\n    this.panUp = (function () {\n      var v = new THREE.Vector3();\n\n      return function panUp(distance) {\n        var te = this.object.matrix.elements;\n\n        // get Y column of matrix\n        v.set(te[4], te[5], te[6]);\n        v.multiplyScalar(distance);\n\n        panOffset.add(v);\n      };\n    })();\n\n    // pass in x,y of change desired in pixel space,\n    // right and down are positive\n    this.pan = function (deltaX, deltaY, screenWidth, screenHeight) {\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        var offset = position.clone().sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(((scope.object.fov / 2) * Math.PI) / 180.0);\n\n        // we actually don't use screenWidth, since perspective camera is fixed to screen height\n        scope.panLeft((2 * deltaX * targetDistance) / screenHeight);\n        scope.panUp((2 * deltaY * targetDistance) / screenHeight);\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\n        // orthographic\n        scope.panLeft((deltaX * (scope.object.right - scope.object.left)) / screenWidth);\n        scope.panUp((deltaY * (scope.object.top - scope.object.bottom)) / screenHeight);\n      } else {\n        // camera neither orthographic or perspective\n        console.warn(\n          'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.'\n        );\n      }\n    };\n\n    this.dollyIn = function (dollyScale) {\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n        scale /= dollyScale;\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\n        scope.object.zoom = Math.max(\n          this.minZoom,\n          Math.min(this.maxZoom, this.object.zoom * dollyScale)\n        );\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\n          'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'\n        );\n      }\n    };\n\n    this.dollyOut = function (dollyScale) {\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n        scale *= dollyScale;\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\n        scope.object.zoom = Math.max(\n          this.minZoom,\n          Math.min(this.maxZoom, this.object.zoom / dollyScale)\n        );\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\n          'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'\n        );\n      }\n    };\n\n    this.update = (function () {\n      var offset = new THREE.Vector3();\n\n      // so camera.up is the orbit axis\n      var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n      var quatInverse = quat.clone().inverse();\n\n      var lastPosition = new THREE.Vector3();\n      var lastQuaternion = new THREE.Quaternion();\n\n      return function () {\n        var position = this.object.position;\n\n        offset.copy(position).sub(this.target);\n\n        // rotate offset to \"y-axis-is-up\" space\n        offset.applyQuaternion(quat);\n\n        // angle from z-axis around y-axis\n\n        theta = Math.atan2(offset.x, offset.z);\n\n        // angle from y-axis\n\n        phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\n\n        theta += thetaDelta;\n        phi += phiDelta;\n\n        // restrict theta to be between desired limits\n        theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n        // restrict phi to be between desired limits\n        phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n        // restrict phi to be betwee EPS and PI-EPS\n        phi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n        var radius = offset.length() * scale;\n\n        // restrict radius to be between desired limits\n        radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n        // move target to panned location\n        this.target.add(panOffset);\n\n        offset.x = radius * Math.sin(phi) * Math.sin(theta);\n        offset.y = radius * Math.cos(phi);\n        offset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n        // rotate offset back to \"camera-up-vector-is-up\" space\n        offset.applyQuaternion(quatInverse);\n\n        position.copy(this.target).add(offset);\n\n        this.object.lookAt(this.target);\n\n        if (this.enableDamping === true) {\n          thetaDelta *= 1 - this.dampingFactor;\n          phiDelta *= 1 - this.dampingFactor;\n        } else {\n          thetaDelta = 0;\n          phiDelta = 0;\n        }\n\n        scale = 1;\n        panOffset.set(0, 0, 0);\n\n        // update condition is:\n        // min(camera displacement, camera rotation in radians)^2 > EPS\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n        if (\n          zoomChanged ||\n          lastPosition.distanceToSquared(this.object.position) > EPS ||\n          8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS\n        ) {\n          lastPosition.copy(this.object.position);\n          lastQuaternion.copy(this.object.quaternion);\n          zoomChanged = false;\n\n          return true;\n        }\n\n        return false;\n      };\n    })();\n  }\n\n  // This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n  // the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n  // supported.\n  //\n  //    Orbit - left mouse / touch: one finger move\n  //    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n  //    Pan - right mouse, or arrow keys / touch: three finter swipe\n\n  function OrbitControls(object, domElement) {\n    var constraint = new OrbitConstraint(object);\n\n    this.domElement = domElement !== undefined ? domElement : document;\n\n    // API\n\n    Object.defineProperty(this, 'constraint', {\n      get: function () {\n        return constraint;\n      },\n    });\n\n    this.getPolarAngle = function () {\n      return constraint.getPolarAngle();\n    };\n\n    this.getAzimuthalAngle = function () {\n      return constraint.getAzimuthalAngle();\n    };\n\n    // Set to false to disable this control\n    this.enabled = true;\n\n    // center is old, deprecated; use \"target\" instead\n    this.center = this.target;\n\n    // This option actually enables dollying in and out; left as \"zoom\" for\n    // backwards compatibility.\n    // Set to false to disable zooming\n    this.enableZoom = true;\n    this.zoomSpeed = 1.0;\n\n    // Set to false to disable rotating\n    this.enableRotate = true;\n    this.rotateSpeed = 1.0;\n\n    // Set to false to disable panning\n    this.enablePan = true;\n    this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n    // Set to true to automatically rotate around the target\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\n    this.autoRotate = false;\n    this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n    // Set to false to disable use of the keys\n    this.enableKeys = true;\n\n    // The four arrow keys\n    this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n    // Mouse buttons\n    this.mouseButtons = {\n      ORBIT: THREE.MOUSE.LEFT,\n      ZOOM: THREE.MOUSE.MIDDLE,\n      PAN: THREE.MOUSE.RIGHT,\n    };\n\n    ////////////\n    // internals\n\n    var scope = this;\n\n    var rotateStart = new THREE.Vector2();\n    var rotateEnd = new THREE.Vector2();\n    var rotateDelta = new THREE.Vector2();\n\n    var panStart = new THREE.Vector2();\n    var panEnd = new THREE.Vector2();\n    var panDelta = new THREE.Vector2();\n\n    var dollyStart = new THREE.Vector2();\n    var dollyEnd = new THREE.Vector2();\n    var dollyDelta = new THREE.Vector2();\n\n    var STATE = {\n      NONE: -1,\n      ROTATE: 0,\n      DOLLY: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_DOLLY: 4,\n      TOUCH_PAN: 5,\n    };\n\n    var state = STATE.NONE;\n\n    // for reset\n\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.zoom0 = this.object.zoom;\n\n    // events\n\n    var changeEvent = { type: 'change' };\n    var startEvent = { type: 'start' };\n    var endEvent = { type: 'end' };\n\n    // pass in x,y of change desired in pixel space,\n    // right and down are positive\n    function pan(deltaX, deltaY) {\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      constraint.pan(deltaX, deltaY, element.clientWidth, element.clientHeight);\n    }\n\n    this.update = function () {\n      if (this.autoRotate && state === STATE.NONE) {\n        constraint.rotateLeft(getAutoRotationAngle());\n      }\n\n      if (constraint.update() === true) {\n        this.dispatchEvent(changeEvent);\n      }\n    };\n\n    this.reset = function () {\n      state = STATE.NONE;\n\n      this.target.copy(this.target0);\n      this.object.position.copy(this.position0);\n      this.object.zoom = this.zoom0;\n\n      this.object.updateProjectionMatrix();\n      this.dispatchEvent(changeEvent);\n\n      this.update();\n    };\n\n    function getAutoRotationAngle() {\n      return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\n    }\n\n    function getZoomScale() {\n      return Math.pow(0.95, scope.zoomSpeed);\n    }\n\n    function onMouseDown(event) {\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n\n      if (event.button === scope.mouseButtons.ORBIT) {\n        if (scope.enableRotate === false) return;\n\n        state = STATE.ROTATE;\n\n        rotateStart.set(event.clientX, event.clientY);\n      } else if (event.button === scope.mouseButtons.ZOOM) {\n        if (scope.enableZoom === false) return;\n\n        state = STATE.DOLLY;\n\n        dollyStart.set(event.clientX, event.clientY);\n      } else if (event.button === scope.mouseButtons.PAN) {\n        if (scope.enablePan === false) return;\n\n        state = STATE.PAN;\n\n        panStart.set(event.clientX, event.clientY);\n      }\n\n      if (state !== STATE.NONE) {\n        document.addEventListener('mousemove', onMouseMove, false);\n        document.addEventListener('mouseup', onMouseUp, false);\n        scope.dispatchEvent(startEvent);\n      }\n    }\n\n    function onMouseMove(event) {\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      if (state === STATE.ROTATE) {\n        if (scope.enableRotate === false) return;\n\n        rotateEnd.set(event.clientX, event.clientY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n\n        // rotating across whole screen goes 360 degrees around\n        constraint.rotateLeft(\n          ((2 * Math.PI * rotateDelta.x) / element.clientWidth) * scope.rotateSpeed\n        );\n\n        // rotating up and down along whole screen attempts to go 360, but limited to 180\n        constraint.rotateUp(\n          ((2 * Math.PI * rotateDelta.y) / element.clientHeight) * scope.rotateSpeed\n        );\n\n        rotateStart.copy(rotateEnd);\n      } else if (state === STATE.DOLLY) {\n        if (scope.enableZoom === false) return;\n\n        dollyEnd.set(event.clientX, event.clientY);\n        dollyDelta.subVectors(dollyEnd, dollyStart);\n\n        if (dollyDelta.y > 0) {\n          constraint.dollyIn(getZoomScale());\n        } else if (dollyDelta.y < 0) {\n          constraint.dollyOut(getZoomScale());\n        }\n\n        dollyStart.copy(dollyEnd);\n      } else if (state === STATE.PAN) {\n        if (scope.enablePan === false) return;\n\n        panEnd.set(event.clientX, event.clientY);\n        panDelta.subVectors(panEnd, panStart);\n\n        pan(panDelta.x, panDelta.y);\n\n        panStart.copy(panEnd);\n      }\n\n      if (state !== STATE.NONE) scope.update();\n    }\n\n    function onMouseUp(/* event */) {\n      if (scope.enabled === false) return;\n\n      document.removeEventListener('mousemove', onMouseMove, false);\n      document.removeEventListener('mouseup', onMouseUp, false);\n      scope.dispatchEvent(endEvent);\n      state = STATE.NONE;\n    }\n\n    function onMouseWheel(event) {\n      if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      var delta = 0;\n\n      if (event.wheelDelta !== undefined) {\n        // WebKit / Opera / Explorer 9\n\n        delta = event.wheelDelta;\n      } else if (event.detail !== undefined) {\n        // Firefox\n\n        delta = -event.detail;\n      }\n\n      if (delta > 0) {\n        constraint.dollyOut(getZoomScale());\n      } else if (delta < 0) {\n        constraint.dollyIn(getZoomScale());\n      }\n\n      scope.update();\n      scope.dispatchEvent(startEvent);\n      scope.dispatchEvent(endEvent);\n    }\n\n    function onKeyDown(event) {\n      if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false)\n        return;\n\n      switch (event.keyCode) {\n        case scope.keys.UP:\n          pan(0, scope.keyPanSpeed);\n          scope.update();\n          break;\n\n        case scope.keys.BOTTOM:\n          pan(0, -scope.keyPanSpeed);\n          scope.update();\n          break;\n\n        case scope.keys.LEFT:\n          pan(scope.keyPanSpeed, 0);\n          scope.update();\n          break;\n\n        case scope.keys.RIGHT:\n          pan(-scope.keyPanSpeed, 0);\n          scope.update();\n          break;\n      }\n    }\n\n    function touchstart(event) {\n      if (scope.enabled === false) return;\n\n      switch (event.touches.length) {\n        case 1: // one-fingered touch: rotate\n          if (scope.enableRotate === false) return;\n\n          state = STATE.TOUCH_ROTATE;\n\n          rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n          break;\n\n        case 2: // two-fingered touch: dolly\n          if (scope.enableZoom === false) return;\n\n          state = STATE.TOUCH_DOLLY;\n\n          var dx = event.touches[0].pageX - event.touches[1].pageX;\n          var dy = event.touches[0].pageY - event.touches[1].pageY;\n          var distance = Math.sqrt(dx * dx + dy * dy);\n          dollyStart.set(0, distance);\n          break;\n\n        case 3: // three-fingered touch: pan\n          if (scope.enablePan === false) return;\n\n          state = STATE.TOUCH_PAN;\n\n          panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n\n      if (state !== STATE.NONE) scope.dispatchEvent(startEvent);\n    }\n\n    function touchmove(event) {\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      switch (event.touches.length) {\n        case 1: // one-fingered touch: rotate\n          if (scope.enableRotate === false) return;\n          if (state !== STATE.TOUCH_ROTATE) return;\n\n          rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n          rotateDelta.subVectors(rotateEnd, rotateStart);\n\n          // rotating across whole screen goes 360 degrees around\n          constraint.rotateLeft(\n            ((2 * Math.PI * rotateDelta.x) / element.clientWidth) * scope.rotateSpeed\n          );\n          // rotating up and down along whole screen attempts to go 360, but limited to 180\n          constraint.rotateUp(\n            ((2 * Math.PI * rotateDelta.y) / element.clientHeight) * scope.rotateSpeed\n          );\n\n          rotateStart.copy(rotateEnd);\n\n          scope.update();\n          break;\n\n        case 2: // two-fingered touch: dolly\n          if (scope.enableZoom === false) return;\n          if (state !== STATE.TOUCH_DOLLY) return;\n\n          var dx = event.touches[0].pageX - event.touches[1].pageX;\n          var dy = event.touches[0].pageY - event.touches[1].pageY;\n          var distance = Math.sqrt(dx * dx + dy * dy);\n\n          dollyEnd.set(0, distance);\n          dollyDelta.subVectors(dollyEnd, dollyStart);\n\n          if (dollyDelta.y > 0) {\n            constraint.dollyOut(getZoomScale());\n          } else if (dollyDelta.y < 0) {\n            constraint.dollyIn(getZoomScale());\n          }\n\n          dollyStart.copy(dollyEnd);\n\n          scope.update();\n          break;\n\n        case 3: // three-fingered touch: pan\n          if (scope.enablePan === false) return;\n          if (state !== STATE.TOUCH_PAN) return;\n\n          panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n          panDelta.subVectors(panEnd, panStart);\n\n          pan(panDelta.x, panDelta.y);\n\n          panStart.copy(panEnd);\n\n          scope.update();\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n    }\n\n    function touchend(/* event */) {\n      if (scope.enabled === false) return;\n\n      scope.dispatchEvent(endEvent);\n      state = STATE.NONE;\n    }\n\n    function contextmenu(event) {\n      event.preventDefault();\n    }\n\n    this.dispose = function () {\n      this.domElement.removeEventListener('contextmenu', contextmenu, false);\n      this.domElement.removeEventListener('mousedown', onMouseDown, false);\n      this.domElement.removeEventListener('mousewheel', onMouseWheel, false);\n      this.domElement.removeEventListener('MozMousePixelScroll', onMouseWheel, false); // firefox\n\n      this.domElement.removeEventListener('touchstart', touchstart, false);\n      this.domElement.removeEventListener('touchend', touchend, false);\n      this.domElement.removeEventListener('touchmove', touchmove, false);\n\n      document.removeEventListener('mousemove', onMouseMove, false);\n      document.removeEventListener('mouseup', onMouseUp, false);\n\n      window.removeEventListener('keydown', onKeyDown, false);\n    };\n\n    this.domElement.addEventListener('contextmenu', contextmenu, false);\n\n    this.domElement.addEventListener('mousedown', onMouseDown, false);\n    this.domElement.addEventListener('mousewheel', onMouseWheel, false);\n    this.domElement.addEventListener('MozMousePixelScroll', onMouseWheel, false); // firefox\n\n    this.domElement.addEventListener('touchstart', touchstart, false);\n    this.domElement.addEventListener('touchend', touchend, false);\n    this.domElement.addEventListener('touchmove', touchmove, false);\n\n    window.addEventListener('keydown', onKeyDown, false);\n\n    // force an update at start\n    this.update();\n  }\n\n  OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\n  OrbitControls.prototype.constructor = OrbitControls;\n\n  Object.defineProperties(OrbitControls.prototype, {\n    object: {\n      get: function () {\n        return this.constraint.object;\n      },\n    },\n\n    target: {\n      get: function () {\n        return this.constraint.target;\n      },\n\n      set: function (value) {\n        console.warn('THREE.OrbitControls: target is now immutable. Use target.set() instead.');\n        this.constraint.target.copy(value);\n      },\n    },\n\n    minDistance: {\n      get: function () {\n        return this.constraint.minDistance;\n      },\n\n      set: function (value) {\n        this.constraint.minDistance = value;\n      },\n    },\n\n    maxDistance: {\n      get: function () {\n        return this.constraint.maxDistance;\n      },\n\n      set: function (value) {\n        this.constraint.maxDistance = value;\n      },\n    },\n\n    minZoom: {\n      get: function () {\n        return this.constraint.minZoom;\n      },\n\n      set: function (value) {\n        this.constraint.minZoom = value;\n      },\n    },\n\n    maxZoom: {\n      get: function () {\n        return this.constraint.maxZoom;\n      },\n\n      set: function (value) {\n        this.constraint.maxZoom = value;\n      },\n    },\n\n    minPolarAngle: {\n      get: function () {\n        return this.constraint.minPolarAngle;\n      },\n\n      set: function (value) {\n        this.constraint.minPolarAngle = value;\n      },\n    },\n\n    maxPolarAngle: {\n      get: function () {\n        return this.constraint.maxPolarAngle;\n      },\n\n      set: function (value) {\n        this.constraint.maxPolarAngle = value;\n      },\n    },\n\n    minAzimuthAngle: {\n      get: function () {\n        return this.constraint.minAzimuthAngle;\n      },\n\n      set: function (value) {\n        this.constraint.minAzimuthAngle = value;\n      },\n    },\n\n    maxAzimuthAngle: {\n      get: function () {\n        return this.constraint.maxAzimuthAngle;\n      },\n\n      set: function (value) {\n        this.constraint.maxAzimuthAngle = value;\n      },\n    },\n\n    enableDamping: {\n      get: function () {\n        return this.constraint.enableDamping;\n      },\n\n      set: function (value) {\n        this.constraint.enableDamping = value;\n      },\n    },\n\n    dampingFactor: {\n      get: function () {\n        return this.constraint.dampingFactor;\n      },\n\n      set: function (value) {\n        this.constraint.dampingFactor = value;\n      },\n    },\n\n    // backward compatibility\n\n    noZoom: {\n      get: function () {\n        console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n        return !this.enableZoom;\n      },\n\n      set: function (value) {\n        console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n        this.enableZoom = !value;\n      },\n    },\n\n    noRotate: {\n      get: function () {\n        console.warn(\n          'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'\n        );\n        return !this.enableRotate;\n      },\n\n      set: function (value) {\n        console.warn(\n          'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'\n        );\n        this.enableRotate = !value;\n      },\n    },\n\n    noPan: {\n      get: function () {\n        console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n        return !this.enablePan;\n      },\n\n      set: function (value) {\n        console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n        this.enablePan = !value;\n      },\n    },\n\n    noKeys: {\n      get: function () {\n        console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n        return !this.enableKeys;\n      },\n\n      set: function (value) {\n        console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n        this.enableKeys = !value;\n      },\n    },\n\n    staticMoving: {\n      get: function () {\n        console.warn(\n          'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'\n        );\n        return !this.constraint.enableDamping;\n      },\n\n      set: function (value) {\n        console.warn(\n          'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'\n        );\n        this.constraint.enableDamping = !value;\n      },\n    },\n\n    dynamicDampingFactor: {\n      get: function () {\n        console.warn(\n          'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'\n        );\n        return this.constraint.dampingFactor;\n      },\n\n      set: function (value) {\n        console.warn(\n          'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'\n        );\n        this.constraint.dampingFactor = value;\n      },\n    },\n  });\n\n  return OrbitControls;\n};\n"],"sourceRoot":""}